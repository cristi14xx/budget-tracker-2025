<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Budget Pro</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Splash -->
  <div id="splash">
    <div class="splash-box">
      <div class="splash-icon">
        <svg viewBox="0 0 24 24"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
      </div>
      <div class="splash-name">Budget Pro</div>
    </div>
  </div>

  <!-- Auth -->
  <div id="auth" class="hide">
    <div class="auth-head">
      <div class="auth-icon">
        <svg viewBox="0 0 24 24"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
      </div>
      <h1>Budget Pro</h1>
      <p>Managementul finanÈ›elor personale</p>
    </div>
    
    <!-- Google Sign-In Button -->
    <button class="google-btn" onclick="doGoogleLogin()">
      <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
      </svg>
      ContinuÄƒ cu Google
    </button>
    
    <div class="auth-divider">
      <span>sau</span>
    </div>
    
    <div class="auth-tabs">
      <button class="auth-tab on" onclick="showTab('login')">Conectare</button>
      <button class="auth-tab" onclick="showTab('register')">Ãnregistrare</button>
    </div>
    <form id="loginForm" class="auth-form" onsubmit="doLogin(event)">
      <input type="email" class="auth-input" id="loginEmail" placeholder="Email" required>
      <input type="password" class="auth-input" id="loginPass" placeholder="ParolÄƒ" required>
      <button type="submit" class="auth-btn">ConecteazÄƒ-te</button>
    </form>
    <form id="registerForm" class="auth-form hide" onsubmit="doRegister(event)">
      <input type="text" class="auth-input" id="regName" placeholder="Nume" required>
      <input type="email" class="auth-input" id="regEmail" placeholder="Email" required>
      <input type="password" class="auth-input" id="regPass" placeholder="ParolÄƒ" required>
      <button type="submit" class="auth-btn">CreeazÄƒ cont</button>
    </form>
  </div>

  <!-- App -->
  <div id="app" class="hide">
    <header class="hdr">
      <button class="hdr-btn" onclick="openModal('aiModal')">
        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/></svg>
      </button>
      <span class="hdr-title" id="hdrTitle">Budget Pro</span>
      <div class="hdr-avatar" id="hdrAvatar" onclick="nav('menu')">U</div>
    </header>

    <main class="content">
      <!-- HOME -->
      <section id="homeView" class="view on">
        <div class="welcome">
          <h2 id="welcomeText">BunÄƒ ziua</h2>
          <p id="welcomeSub">SituaÈ›ia financiarÄƒ pentru luna curentÄƒ</p>
        </div>

        <div class="hero">
          <div class="hero-label">BalanÈ›a lunii</div>
          <div class="hero-bal" id="heroBal">0 RON</div>
          <div class="hero-row">
            <div class="hero-stat">
              <div class="hero-stat-icon up">â†‘</div>
              <div class="hero-stat-lbl">Venituri</div>
              <div class="hero-stat-val grn" id="heroInc">0</div>
            </div>
            <div class="hero-stat">
              <div class="hero-stat-icon dn">â†“</div>
              <div class="hero-stat-lbl">Cheltuieli</div>
              <div class="hero-stat-val red" id="heroExp">0</div>
            </div>
          </div>
        </div>

        <div class="month-nav">
          <button class="month-btn" onclick="prevMonth()">â€¹</button>
          <span class="month-txt" id="monthTxt">Dec 2024</span>
          <button class="month-btn" onclick="nextMonth()">â€º</button>
        </div>

        <div class="stats-row">
          <div class="stat-box">
            <div class="stat-val" id="statSave">0%</div>
            <div class="stat-lbl">Economisit</div>
          </div>
          <div class="stat-box">
            <div class="stat-val" id="statDaily">0</div>
            <div class="stat-lbl">Media/zi</div>
          </div>
          <div class="stat-box">
            <div class="stat-val" id="statStreak">0</div>
            <div class="stat-lbl">Streak</div>
          </div>
        </div>

        <!-- ğŸ§  GENIUS: Anomaly Alerts -->
        <div id="anomalyAlerts" class="genius-alerts hide"></div>

        <!-- ğŸ§  GENIUS: Daily Coach Tips -->
        <section class="section genius-section">
          <div class="sec-head">
            <h3 class="sec-title">Spending Coach</h3>
          </div>
          <div id="coachTips" class="coach-tips"></div>
        </section>

        <!-- ğŸ§  GENIUS: Predictions Widget -->
        <div id="predictionsWidget" class="predictions-widget"></div>

        <!-- ğŸ§  GENIUS: Velocity Widget -->
        <div id="velocityWidget"></div>

        <!-- ğŸ§  GENIUS: Quick Actions -->
        <div class="genius-actions">
          <button class="genius-action-btn" onclick="openWhatIfSimulator()">
            <svg class="quick-svg" viewBox="0 0 24 24"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
            <span>What-If</span>
          </button>
          <button class="genius-action-btn" onclick="nav('predictions')">
            <span>ğŸ”®</span>
            <span>PredicÈ›ii</span>
          </button>
          <button class="genius-action-btn" onclick="nav('timeAnalysis')">
            <span>â°</span>
            <span>Timp</span>
          </button>
          <button class="genius-action-btn" onclick="nav('merchants')">
            <span>ğŸª</span>
            <span>Magazine</span>
          </button>
        </div>

        <section class="section">
          <div class="sec-head">
            <h3 class="sec-title">TranzacÈ›ii recente</h3>
            <button class="sec-link" onclick="nav('transactions')">Vezi toate</button>
          </div>
          <div class="tx-list" id="recentTx"></div>
        </section>
      </section>

      <!-- TRANSACTIONS -->
      <section id="transactionsView" class="view">
        <div class="search-box">
          <span>ğŸ”</span>
          <input type="text" id="searchIn" placeholder="CautÄƒ..." oninput="doSearch()">
          <button onclick="nav('calendar')" style="background:var(--card2);border:none;color:var(--text);padding:8px;border-radius:8px;cursor:pointer;">ğŸ“…</button>
        </div>
        <div class="filters">
          <button class="flt-btn on" data-f="all" onclick="setFilter('all')">Toate</button>
          <button class="flt-btn" data-f="expense" onclick="setFilter('expense')">Cheltuieli</button>
          <button class="flt-btn" data-f="income" onclick="setFilter('income')">Venituri</button>
        </div>
        <div class="month-nav">
          <button class="month-btn" onclick="prevMonth()">â€¹</button>
          <span class="month-txt" id="txMonthTxt">Dec 2024</span>
          <button class="month-btn" onclick="nextMonth()">â€º</button>
        </div>
        <div class="tx-list" id="allTx"></div>
      </section>

      <!-- ANALYTICS -->
      <section id="analyticsView" class="view">
        <div class="score-card">
          <div class="score-lbl">ğŸ’ª Scor sÄƒnÄƒtate financiarÄƒ</div>
          <div class="score-num" id="scoreNum">--</div>
          <div class="score-bar"><div class="score-fill" id="scoreFill" style="width:0%"></div></div>
        </div>
        <div class="metric-grid">
          <div class="metric-box">
            <div class="metric-icon"></div>
            <div class="metric-val" id="metricFire">0%</div>
            <div class="metric-lbl">Progres FIRE</div>
          </div>
          <div class="metric-box">
            <div class="metric-icon">ğŸ“…</div>
            <div class="metric-val" id="metricYears">--</div>
            <div class="metric-lbl">Ani pÃ¢nÄƒ FIRE</div>
          </div>
        </div>
        <div class="chart-box">
          <div class="chart-title">Trend 6 luni</div>
          <div class="chart-area"><canvas id="trendChart"></canvas></div>
        </div>
        <section class="section">
          <div class="sec-head"><h3 class="sec-title">RecomandÄƒri</h3></div>
          <div id="tipsList"></div>
        </section>
      </section>

      <!-- BUDGETS -->
      <section id="budgetsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('home')">â†</button>
          <h2 class="sub-title">Bugete</h2>
          <button class="add-btn" onclick="openBudgetModal()">+</button>
        </div>
        <div id="budgetsList"></div>
      </section>

      <!-- ğŸ§  GENIUS: ANOMALIES VIEW -->
      <section id="anomaliesView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('home')">â†</button>
          <h2 class="sub-title">âš ï¸ Anomalii detectate</h2>
        </div>
        <div id="anomaliesList" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: PREDICTIONS VIEW -->
      <section id="predictionsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('home')">â†</button>
          <h2 class="sub-title">ğŸ”® PredicÈ›ii AI</h2>
        </div>
        <div id="predictionsContent" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: TIME ANALYSIS VIEW -->
      <section id="timeAnalysisView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('home')">â†</button>
          <h2 class="sub-title">â° AnalizÄƒ timp</h2>
        </div>
        <div id="timeAnalysisContent" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: MERCHANT ANALYTICS VIEW -->
      <section id="merchantsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('home')">â†</button>
          <h2 class="sub-title">ğŸª Magazine & LocaÈ›ii</h2>
        </div>
        <div id="merchantContent" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: SMART BUDGETS VIEW -->
      <section id="smartBudgetsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">ğŸ“ Bugete AI</h2>
        </div>
        <div id="smartBudgetsContent" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: SMART GOALS VIEW -->
      <section id="smartGoalsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Obiective inteligente</h2>
        </div>
        <div id="smartGoalsContent" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: HEALTH SCORE VIEW -->
      <section id="healthScoreView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">ğŸ’ª Scor SÄƒnÄƒtate FinanciarÄƒ</h2>
        </div>
        <div id="healthScoreContent" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: INVESTMENT READINESS VIEW -->
      <section id="investmentView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">PregÄƒtire investiÈ›ii</h2>
        </div>
        <div id="investmentContent" class="genius-content"></div>
      </section>

      <!-- ğŸ§  GENIUS: RECOMMENDATIONS VIEW -->
      <section id="recommendationsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">RecomandÄƒri personalizate</h2>
        </div>
        <div id="recommendationsContent" class="genius-content"></div>
      </section>

      <!-- MENU -->
      <section id="menuView" class="view">
        <div class="profile-box">
          <div class="profile-pic" id="profilePic">U</div>
          <div class="profile-info">
            <div class="profile-name" id="profileName">Utilizator</div>
            <div class="profile-email" id="profileEmail">email@example.com</div>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">FinanÈ›e</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('goals')"><svg class="menu-svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg><span class="menu-txt">Obiective</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('accounts')"><span class="menu-icon">ğŸ¦</span><span class="menu-txt">Conturi</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('debts')"><span class="menu-icon">ğŸ¤</span><span class="menu-txt">Datorii</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('recurring')"><svg class="menu-svg" viewBox="0 0 24 24"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg><span class="menu-txt">Recurente</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('subscriptions')"><svg class="menu-svg" viewBox="0 0 24 24"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg><span class="menu-txt">Abonamente</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('challenges')"><svg class="menu-svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg><span class="menu-txt">ProvocÄƒri</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">AnalizÄƒ</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('netWorth')"><svg class="menu-svg" viewBox="0 0 24 24"><path d="m22 7-8.5 8.5-5-5L2 17"/><path d="M16 7h6v6"/></svg><span class="menu-txt">EvoluÈ›ie Patrimoniu</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('insights')"><svg class="menu-svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/></svg><span class="menu-txt">AI Insights</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">ğŸ§  Genius AI</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('healthScore')"><span class="menu-icon">ğŸ’ª</span><span class="menu-txt">Scor SÄƒnÄƒtate</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('predictions')"><span class="menu-icon">ğŸ”®</span><span class="menu-txt">PredicÈ›ii Spending</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('anomalies')"><span class="menu-icon">âš ï¸</span><span class="menu-txt">Anomalii Detectate</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('recommendations')"><svg class="menu-svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg><span class="menu-txt">RecomandÄƒri AI</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('timeAnalysis')"><span class="menu-icon">â°</span><span class="menu-txt">AnalizÄƒ Timp</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('merchants')"><span class="menu-icon">ğŸª</span><span class="menu-txt">Merchant Analytics</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('smartBudgets')"><span class="menu-icon">ğŸ“</span><span class="menu-txt">Auto-Budgeting AI</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('smartGoals')"><svg class="menu-svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg><span class="menu-txt">Smart Goals AI</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('investment')"><svg class="menu-svg" viewBox="0 0 24 24"><path d="m22 7-8.5 8.5-5-5L2 17"/><path d="M16 7h6v6"/></svg><span class="menu-txt">PregÄƒtire InvestiÈ›ii</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="openWhatIfSimulator()"><svg class="menu-svg" viewBox="0 0 24 24"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg><span class="menu-txt">What-If Simulator</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">Personalizare</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('customcats')"><span class="menu-icon">ğŸ·ï¸</span><span class="menu-txt">Categorii Custom</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">CasÄƒ</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('utilities')"><svg class="menu-svg" viewBox="0 0 24 24"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg><span class="menu-txt">UtilitÄƒÈ›i</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('reminders')"><span class="menu-icon">â°</span><span class="menu-txt">Remindere</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">Altele</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('achievements')"><svg class="menu-svg" viewBox="0 0 24 24"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg><span class="menu-txt">Achievements</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('settings')"><svg class="menu-svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg><span class="menu-txt">SetÄƒri</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-grp">
            <button class="menu-item danger" onclick="doLogout()"><span class="menu-icon">ğŸšª</span><span class="menu-txt">Deconectare</span></button>
          </div>
        </div>
      </section>

      <!-- GOALS -->
      <section id="goalsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Obiective</h2>
          <button class="add-btn" onclick="openGoalModal()">+</button>
        </div>
        <div id="goalsList"></div>
      </section>

      <!-- ACCOUNTS -->
      <section id="accountsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Conturi</h2>
          <button class="add-btn" onclick="openAccountModal()">+</button>
        </div>
        <div id="accountsList"></div>
      </section>

      <!-- DEBTS -->
      <section id="debtsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Datorii</h2>
          <button class="add-btn" onclick="openDebtModal()">+</button>
        </div>
        <div id="debtsList"></div>
      </section>

      <!-- UTILITIES -->
      <section id="utilitiesView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">UtilitÄƒÈ›i</h2>
          <button class="add-btn" onclick="openUtilityModal()">+</button>
        </div>
        <div class="util-grid">
          <div class="util-card" onclick="openUtilityModal('electricity')">
            <div class="util-icon" style="background:rgba(234,179,8,0.2)"></div>
            <div class="util-name">Curent</div>
            <div class="util-val" id="uElec">--</div>
          </div>
          <div class="util-card" onclick="openUtilityModal('gas')">
            <div class="util-icon" style="background:rgba(249,115,22,0.2)"></div>
            <div class="util-name">Gaz</div>
            <div class="util-val" id="uGas">--</div>
          </div>
          <div class="util-card" onclick="openUtilityModal('water')">
            <div class="util-icon" style="background:rgba(59,130,246,0.2)">ğŸ’§</div>
            <div class="util-name">ApÄƒ</div>
            <div class="util-val" id="uWater">--</div>
          </div>
          <div class="util-card" onclick="openUtilityModal('internet')">
            <div class="util-icon" style="background:rgba(139,92,246,0.2)">ğŸ“¶</div>
            <div class="util-name">Internet</div>
            <div class="util-val" id="uNet">--</div>
          </div>
        </div>
        <div id="utilHistory"></div>
      </section>

      <!-- REMINDERS -->
      <section id="remindersView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Remindere</h2>
          <button class="add-btn" onclick="openReminderModal()">+</button>
        </div>
        <div id="remindersList"></div>
      </section>

      <!-- ACHIEVEMENTS -->
      <section id="achievementsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Achievements</h2>
        </div>
        <div class="ach-hero">
          <div class="ach-count" id="achCount">0/30</div>
          <div class="ach-lbl">deblocate</div>
        </div>
        <div class="ach-grid" id="achGrid"></div>
      </section>

      <!-- SETTINGS -->
      <section id="settingsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">SetÄƒri</h2>
        </div>
        <div class="menu-sec">
          <div class="menu-lbl">PreferinÈ›e</div>
          <div class="menu-grp">
            <div class="menu-item">
              <span class="menu-icon">ğŸ’±</span>
              <span class="menu-txt">MonedÄƒ</span>
              <select id="currSel" onchange="setCurrency(this.value)" style="background:var(--card2);border:1px solid var(--border);color:#fff;padding:8px;border-radius:8px;">
                <option value="RON">RON</option>
                <option value="EUR">EUR</option>
                <option value="USD">USD</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- CORECÈšIE SOLD -->
        <div class="menu-sec">
          <div class="menu-lbl">âš–ï¸ CorecÈ›ie Sold</div>
          <div class="menu-grp">
            <div class="menu-item" style="flex-direction:column;align-items:stretch;gap:12px;">
              <p style="font-size:12px;color:var(--text2);margin:0;">
                DacÄƒ soldul calculat nu corespunde cu realitatea, adaugÄƒ o tranzacÈ›ie de corecÈ›ie.
                Aceasta ajusteazÄƒ diferenÈ›a fÄƒrÄƒ a afecta statisticile.
              </p>
              <div style="display:flex;gap:8px;">
                <input type="number" id="balanceCorrectionAmount" placeholder="Sold real actual" style="flex:1;background:var(--card2);border:1px solid var(--border);color:#fff;padding:10px;border-radius:8px;">
                <button onclick="applyBalanceCorrection()" style="background:var(--accent);border:none;color:#000;padding:10px 16px;border-radius:8px;font-weight:600;">CorecteazÄƒ</button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="menu-sec">
          <div class="menu-lbl">FIRE Calculator</div>
          <div class="menu-grp">
            <div class="menu-item">
              <svg class="menu-svg" viewBox="0 0 24 24"><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></svg>
              <input type="number" id="netWorthIn" placeholder="Patrimoniu total" style="flex:1;background:var(--card2);border:1px solid var(--border);color:#fff;padding:8px;border-radius:8px;">
              <button onclick="saveNetWorth()" style="background:var(--accent);border:none;color:#000;padding:8px 14px;border-radius:8px;font-weight:600;margin-left:8px;">Save</button>
            </div>
          </div>
        </div>
        
        <div class="menu-sec">
          <div class="menu-lbl">ğŸ“¦ Date</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="exportData()"><span class="menu-icon">ğŸ“¤</span><span class="menu-txt">Export date</span></button>
            <button class="menu-item danger" onclick="clearData()"><span class="menu-icon">ğŸ—‘ï¸</span><span class="menu-txt">È˜terge toate datele</span></button>
          </div>
        </div>
        
        <div class="menu-sec">
          <div class="menu-lbl">â„¹ï¸ Despre</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('faq')"><span class="menu-icon">â“</span><span class="menu-txt">FAQ & Ghid Utilizare</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>
        
        <!-- Copyright -->
        <div style="text-align:center;padding:24px 16px;margin-top:20px;">
          <p style="font-size:12px;color:var(--text3);margin:0 0 4px;">Budget Pro 2025 v3.0</p>
          <p style="font-size:11px;color:var(--text3);margin:0;">Â© 2025 Cristian Puravu. Toate drepturile rezervate.</p>
        </div>
      </section>
      
      <!-- FAQ -->
      <section id="faqView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('settings')">â†</button>
          <h2 class="sub-title">FAQ & Ghid</h2>
        </div>
        <div style="padding:16px;">
          
          <!-- Quick Start -->
          <div class="card" style="margin-bottom:16px;">
            <div class="card-hdr"><span class="card-title">ğŸš€ Ãnceput Rapid</span></div>
            <div style="padding:16px;font-size:14px;color:var(--text2);line-height:1.6;">
              <p><strong style="color:var(--text);">1. AdaugÄƒ prima tranzacÈ›ie</strong> - ApasÄƒ butonul <strong>+</strong> din mijlocul ecranului</p>
              <p><strong style="color:var(--text);">2. SeteazÄƒ bugete</strong> - Mergi la Bugete È™i defineÈ™te limite pe categorii</p>
              <p><strong style="color:var(--text);">3. AdaugÄƒ venituri recurente</strong> - Salariul, chiria primitÄƒ, etc.</p>
              <p><strong style="color:var(--text);">4. VerificÄƒ AI Insights</strong> - Finley Ã®È›i oferÄƒ sfaturi personalizate</p>
            </div>
          </div>
          
          <!-- FAQ Items -->
          <div class="card" style="margin-bottom:16px;">
            <div class="card-hdr"><span class="card-title">â“ ÃntrebÄƒri Frecvente</span></div>
            <div style="padding:16px;font-size:14px;">
              
              <div style="border-bottom:1px solid var(--border);padding:12px 0;">
                <p style="color:var(--accent);font-weight:600;margin:0 0 8px;">Cum funcÈ›ioneazÄƒ corecÈ›ia sold?</p>
                <p style="color:var(--text2);margin:0;line-height:1.5;">DacÄƒ soldul calculat diferÄƒ de realitate (ex: ai uitat tranzacÈ›ii), introdu soldul real Ã®n "CorecÈ›ie Sold". Se va crea automat o tranzacÈ›ie de ajustare cu diferenÈ›a.</p>
              </div>
              
              <div style="border-bottom:1px solid var(--border);padding:12px 0;">
                <p style="color:var(--accent);font-weight:600;margin:0 0 8px;">Ce sunt categoriile Ã®nvÄƒÈ›ate?</p>
                <p style="color:var(--text2);margin:0;line-height:1.5;">AplicaÈ›ia memoreazÄƒ automat cum categorizezi tranzacÈ›iile. Data viitoare cÃ¢nd scrii "Lidl", va sugera automat categoria "MÃ¢ncare". PoÈ›i vedea È™i È™terge pattern-urile Ã®n Categorii Smart â†’ Tab "ÃnvÄƒÈ›ate".</p>
              </div>
              
              <div style="border-bottom:1px solid var(--border);padding:12px 0;">
                <p style="color:var(--accent);font-weight:600;margin:0 0 8px;">Cum adaug o subcategorie nouÄƒ?</p>
                <p style="color:var(--text2);margin:0;line-height:1.5;">CÃ¢nd adaugi o tranzacÈ›ie È™i selectezi subcategoria, ultima opÈ›iune este "â• AdaugÄƒ nou...". ApasÄƒ È™i introdu numele noii subcategorii.</p>
              </div>
              
              <div style="border-bottom:1px solid var(--border);padding:12px 0;">
                <p style="color:var(--accent);font-weight:600;margin:0 0 8px;">Ce Ã®nseamnÄƒ FIRE?</p>
                <p style="color:var(--text2);margin:0;line-height:1.5;">FIRE = Financial Independence, Retire Early. ReprezintÄƒ suma necesarÄƒ pentru a trÄƒi din investiÈ›ii (de obicei 25x cheltuielile anuale). AplicaÈ›ia calculeazÄƒ cÃ¢È›i ani Ã®È›i mai trebuie.</p>
              </div>
              
              <div style="border-bottom:1px solid var(--border);padding:12px 0;">
                <p style="color:var(--accent);font-weight:600;margin:0 0 8px;">Cum funcÈ›ioneazÄƒ tranzacÈ›iile recurente?</p>
                <p style="color:var(--text2);margin:0;line-height:1.5;">DefineÈ™ti o tranzacÈ›ie (ex: chirie 2000 RON lunar) È™i aplicaÈ›ia o va adÄƒuga automat la fiecare scadenÈ›Äƒ. Le poÈ›i edita sau È™terge oricÃ¢nd.</p>
              </div>
              
              <div style="border-bottom:1px solid var(--border);padding:12px 0;">
                <p style="color:var(--accent);font-weight:600;margin:0 0 8px;">Datele sunt salvate unde?</p>
                <p style="color:var(--text2);margin:0;line-height:1.5;">Datele sunt stocate Ã®n Firebase Cloud, asociate contului tÄƒu Google. Sunt criptate È™i sincronizate pe toate dispozitivele tale.</p>
              </div>
              
              <div style="padding:12px 0;">
                <p style="color:var(--accent);font-weight:600;margin:0 0 8px;">Ce face Finley AI?</p>
                <p style="color:var(--text2);margin:0;line-height:1.5;">Finley este consilierul tÄƒu financiar AI. AnalizeazÄƒ tranzacÈ›iile tale È™i oferÄƒ sfaturi personalizate pentru economisire, reducerea cheltuielilor È™i atingerea obiectivelor.</p>
              </div>
              
            </div>
          </div>
          
          <!-- Tips -->
          <div class="card" style="margin-bottom:16px;">
            <div class="card-hdr"><span class="card-title">Sfaturi Pro</span></div>
            <div style="padding:16px;font-size:13px;color:var(--text2);line-height:1.6;">
              <p>âœ… <strong style="color:var(--text);">AdaugÄƒ tranzacÈ›iile zilnic</strong> - Nu amÃ¢na, uiÈ›i detaliile</p>
              <p>âœ… <strong style="color:var(--text);">FoloseÈ™te tag-uri</strong> - #vacanÈ›Äƒ, #business pentru filtrare uÈ™oarÄƒ</p>
              <p>âœ… <strong style="color:var(--text);">SeteazÄƒ bugete realiste</strong> - Ãncepe cu ce ai cheltuit luna trecutÄƒ</p>
              <p>âœ… <strong style="color:var(--text);">VerificÄƒ AI Insights sÄƒptÄƒmÃ¢nal</strong> - PrimeÈ™ti sfaturi personalizate</p>
              <p>âœ… <strong style="color:var(--text);">ÃncearcÄƒ o provocare</strong> - "No Spend Weekend" e un Ã®nceput bun</p>
            </div>
          </div>
          
          <!-- Copyright Footer -->
          <div style="text-align:center;padding:20px;">
            <p style="font-size:13px;color:var(--text);margin:0 0 4px;">Budget Pro 2025</p>
            <p style="font-size:11px;color:var(--text3);margin:0;">Dezvoltat cu â¤ï¸ de Cristian Puravu</p>
            <p style="font-size:10px;color:var(--text3);margin:8px 0 0;">Â© 2025 Toate drepturile rezervate</p>
          </div>
          
        </div>
      </section>

      <!-- RECURRING -->
      <section id="recurringView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">TranzacÈ›ii Recurente</h2>
          <button class="add-btn" onclick="openRecurringModal()">+</button>
        </div>
        <div id="recurringList"></div>
      </section>

      <!-- SUBSCRIPTIONS -->
      <section id="subscriptionsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Abonamente</h2>
        </div>
        <div id="subsList"></div>
      </section>

      <!-- CALENDAR -->
      <section id="calendarView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('transactions')">â†</button>
          <h2 class="sub-title">Calendar</h2>
        </div>
        <div class="month-nav">
          <button class="month-btn" onclick="prevMonth();renderCalendar()">â€¹</button>
          <span class="month-txt" id="calMonthTxt">Dec 2024</span>
          <button class="month-btn" onclick="nextMonth();renderCalendar()">â€º</button>
        </div>
        <div id="calendarGrid"></div>
      </section>

      <!-- NET WORTH TIMELINE -->
      <section id="netWorthView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('analytics')">â†</button>
          <h2 class="sub-title">EvoluÈ›ie Patrimoniu</h2>
          <button class="add-btn" onclick="saveNetWorthSnapshot()">+</button>
        </div>
        <div class="chart-box" style="height:240px">
          <canvas id="netWorthChart"></canvas>
        </div>
      </section>

      <!-- CHALLENGES -->
      <section id="challengesView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">ProvocÄƒri Economisire</h2>
          <button class="add-btn" onclick="openChallengeModal()">+</button>
        </div>
        <div id="challengesList"></div>
      </section>

      <!-- INSIGHTS -->
      <section id="insightsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('analytics')">â†</button>
          <h2 class="sub-title">AI Insights</h2>
        </div>
        <div id="advancedInsights"></div>
      </section>
      <!-- CUSTOM CATEGORIES & SMART LEARNING -->
      <section id="customcatsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Categorii Smart</h2>
          <button class="add-btn" onclick="openCustomCatModal()">+</button>
        </div>
        
        <!-- Tabs -->
        <div class="sub-tabs" style="margin: 0 16px 16px;">
          <button class="sub-tab on" onclick="showSmartTab('custom')">ğŸ·ï¸ Custom</button>
          <button class="sub-tab" onclick="showSmartTab('learned')">ğŸ§  ÃnvÄƒÈ›ate</button>
          <button class="sub-tab" onclick="showSmartTab('stats')">Statistici</button>
        </div>
        
        <!-- Custom Categories Tab -->
        <div id="smartTabCustom" class="smart-tab-content">
          <div id="customCatsList"></div>
          <div style="margin: 16px; padding-top: 8px; border-top: 1px solid var(--border);">
            <p style="font-size: 12px; color: var(--text2); margin-bottom: 12px;">
              CreeazÄƒ categorii personalizate cu subcategorii È™i cuvinte cheie pentru auto-detectare
            </p>
          </div>
        </div>
        
        <!-- Learned Patterns Tab -->
        <div id="smartTabLearned" class="smart-tab-content" style="display: none;">
          <div class="learned-patterns">
            <div class="learned-header">
              <div class="learned-title">ğŸ§  Modele ÃnvÄƒÈ›ate</div>
              <button class="btn-clear-patterns" onclick="clearLearnedPatterns()">ğŸ—‘ï¸ È˜terge tot</button>
            </div>
            <div id="learnedPatternsList"></div>
            <div class="smart-actions">
              <button class="smart-action-btn" onclick="exportSmartData()">
                ğŸ“¤ ExportÄƒ
              </button>
              <button class="smart-action-btn" onclick="importSmartData()">
                ğŸ“¥ ImportÄƒ
              </button>
            </div>
          </div>
        </div>
        
        <!-- Statistics Tab -->
        <div id="smartTabStats" class="smart-tab-content" style="display: none;">
          <div id="smartStats" style="margin: 16px;"></div>
        </div>
      </section>
    </main>

    <!-- Bottom Nav - 5 butoane principale -->
    <nav class="bnav">
      <button class="nav-btn on" data-v="home" onclick="nav('home')">
        <span class="nav-icon">ğŸ </span>AcasÄƒ
      </button>
      <button class="nav-btn" data-v="transactions" onclick="nav('transactions')">
        <span class="nav-icon">ğŸ“‹</span>Istoric
      </button>
      <button class="nav-btn fab" onclick="openSmartAdd()">
        <div class="fab-btn">+</div>
      </button>
      <button class="nav-btn" data-v="budgets" onclick="nav('budgets')">
        BugeteBugete
      </button>
      <button class="nav-btn" data-v="menu" onclick="nav('menu')">
        <span class="nav-icon">â˜°</span>Cont
      </button>
    </nav>
  </div>

  <!-- MODALS -->
  
  <!-- Smart Add Modal - AI Categorization -->
  <div id="smartAddModal" class="modal">
    <div class="modal-bg" onclick="closeModal('smartAddModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head">
        <span class="modal-title">âœ¨ AdaugÄƒ Rapid</span>
        <button class="modal-x" onclick="closeModal('smartAddModal')">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="smart-hint">Scrie natural, de ex: "50 cafea" sau "salariu 5000"</div>
        <input type="text" id="smartInput" class="form-input big" placeholder="50 cafea..." oninput="processSmartInput()" autocomplete="off">
        <div id="smartPreview" class="hide" style="margin-top:16px"></div>
        <div class="smart-btns">
          <button class="submit-btn" onclick="saveSmartTx()">ğŸ’¾ SalveazÄƒ</button>
          <button class="submit-btn" style="background:var(--card2);color:var(--text);margin-top:8px" onclick="closeModal('smartAddModal');openTxModal()">ğŸ“ Formular Complet</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Custom Category Modal -->
  <div id="customCatModal" class="modal">
    <div class="modal-bg" onclick="closeModal('customCatModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ·ï¸ Categorie NouÄƒ</span><button class="modal-x" onclick="closeModal('customCatModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="customCatForm" onsubmit="saveCustomCat(event)">
          <div class="form-row">
            <label class="form-lbl">Tip</label>
            <select id="customCatType" class="form-select" required>
              <option value="expense">ğŸ’¸ CheltuialÄƒ</option>
              <option value="income">ğŸ’µ Venit</option>
            </select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Nume categorie</label>
            <input type="text" id="customCatName" class="form-input" required placeholder="Ex: Freelance Design">
          </div>
          <div class="form-row">
            <label class="form-lbl">Emoji/Icon</label>
            <input type="text" id="customCatIcon" class="form-input" placeholder="ğŸ¨" maxlength="2">
          </div>
          <div class="form-row">
            <label class="form-lbl">Culoare</label>
            <input type="color" id="customCatColor" class="form-input" value="#8b5cf6" style="height:44px;padding:4px">
          </div>
          <div class="form-row">
            <label class="form-lbl">Subcategorii (separate prin virgulÄƒ)</label>
            <input type="text" id="customCatSubs" class="form-input" placeholder="Logo, Banner, UI/UX, IlustraÈ›ii">
          </div>
          <div class="form-row">
            <label class="form-lbl">Keywords pentru AI (separate prin virgulÄƒ)</label>
            <input type="text" id="customCatKeywords" class="form-input" placeholder="design, grafica, logo, banner">
          </div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Transaction Modal -->
  <div id="txModal" class="modal">
    <div class="modal-bg" onclick="closeModal('txModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head">
        <span class="modal-title" id="txModalTitle">TranzacÈ›ie nouÄƒ</span>
        <button class="modal-x" onclick="closeModal('txModal')">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="type-tabs">
          <button class="type-tab exp on" data-t="expense" onclick="setTxType('expense')">ğŸ’¸ CheltuialÄƒ</button>
          <button class="type-tab inc" data-t="income" onclick="setTxType('income')">ğŸ’µ Venit</button>
        </div>
        <form id="txForm" onsubmit="saveTx(event)">
          <input type="hidden" id="txId">
          <input type="hidden" id="txType" value="expense">
          <div class="form-row">
            <input type="number" class="form-input big" id="txAmount" placeholder="0" step="0.01" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">Categorie</label>
            <select id="txCat" class="form-select" required onchange="loadSubcats()"></select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Subcategorie</label>
            <select id="txSubcat" class="form-select" onchange="handleSubcatChange()"></select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Data</label>
            <input type="date" id="txDate" class="form-input" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">Tags (opÈ›ional)</label>
            <input type="text" id="txTagsInput" class="form-input" placeholder="Ex: #vacanta, #business">
          </div>
          <div class="form-row">
            <label class="form-lbl">NotÄƒ (opÈ›ional)</label>
            <input type="text" id="txNote" class="form-input" placeholder="AdaugÄƒ o notÄƒ..." oninput="handleNoteInput(event)">
          </div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
          <button type="button" class="submit-btn red" id="txDeleteBtn" style="display:none;margin-top:8px" onclick="deleteTx()">È˜terge</button>
        </form>
      </div>
    </div>
  </div>

  <!-- ğŸ§  GENIUS: What-If Simulator Modal -->
  <div id="whatIfModal" class="modal">
    <div class="modal-bg" onclick="closeModal('whatIfModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head">
        <span class="modal-title">What-If Simulator</span>
        <button class="modal-x" onclick="closeModal('whatIfModal')">âœ•</button>
      </div>
      <div class="modal-body whatif-body">
        <p class="whatif-intro">DescoperÄƒ cum mici schimbÄƒri pot avea un impact mare!</p>
        
        <div class="whatif-sliders">
          <div class="whatif-slider">
            <div class="whatif-slider-header">
              <span>Reducere abonamente</span>
              <span id="simSubCutVal">0%</span>
            </div>
            <input type="range" id="simSubCut" min="0" max="100" value="0" oninput="updateWhatIfSimulation()">
          </div>
          
          <div class="whatif-slider">
            <div class="whatif-slider-header">
              <span>ğŸ” Reducere livrÄƒri mÃ¢ncare</span>
              <span id="simFoodCutVal">0%</span>
            </div>
            <input type="range" id="simFoodCut" min="0" max="100" value="0" oninput="updateWhatIfSimulation()">
          </div>
          
          <div class="whatif-slider">
            <div class="whatif-slider-header">
              <span>ğŸ¬ Reducere divertisment</span>
              <span id="simEntCutVal">0%</span>
            </div>
            <input type="range" id="simEntCut" min="0" max="100" value="0" oninput="updateWhatIfSimulation()">
          </div>
          
          <div class="whatif-slider">
            <div class="whatif-slider-header">
              <span>ğŸš— Reducere transport</span>
              <span id="simTransportCutVal">0%</span>
            </div>
            <input type="range" id="simTransportCut" min="0" max="100" value="0" oninput="updateWhatIfSimulation()">
          </div>
          
          <div class="whatif-slider">
            <div class="whatif-slider-header">
              <span>ğŸ’¼ Venit suplimentar</span>
              <span id="simExtraIncomeVal">0 RON</span>
            </div>
            <input type="range" id="simExtraIncome" min="0" max="5000" step="100" value="0" oninput="updateWhatIfSimulation()">
          </div>
        </div>
        
        <div id="whatIfResults" class="whatif-results"></div>
      </div>
    </div>
  </div>

  <!-- AI Modal -->
  <div id="aiModal" class="modal fullscreen">
    <div class="modal-bg" onclick="closeModal('aiModal')"></div>
    <div class="modal-sheet ai-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head">
        <span class="modal-title">ğŸ§  Finley - Consilierul TÄƒu</span>
        <button class="modal-x" onclick="closeModal('aiModal')">âœ•</button>
      </div>
      <div class="modal-body ai-body">
        <div class="ai-chat" id="aiChat">
          <div class="ai-msg">
            <div class="ai-pic">ğŸ§ </div>
            <div class="ai-bubble">
              BunÄƒ ziua. Sunt <strong>Finley</strong>, asistentul financiar integrat.<br><br>
              Pot sÄƒ te ajut cu orice Ã®ntrebare despre finanÈ›e - sau sÄƒ stÄƒm de vorbÄƒ despre orice! ÃntreabÄƒ-mÄƒ ce vrei. ğŸ’¬
            </div>
          </div>
        </div>
        <div class="ai-quick-grid">
          <button class="ai-qbtn full" onclick="askAI('AnalizeazÄƒ-mi situaÈ›ia financiarÄƒ È™i spune-mi cum stau')">
            AnalizÄƒ
            <span class="qbtn-text">AnalizÄƒ completÄƒ</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('Ce sfaturi ai pentru mine sÄƒ economisesc mai mult?')">
            Sfaturi
            <span class="qbtn-text">Sfaturi</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('CÃ¢nd aÈ™ putea atinge independenÈ›a financiarÄƒ?')">
            <span class="qbtn-icon"></span>
            <span class="qbtn-text">FIRE</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('Cum ar trebui sÄƒ Ã®ncep sÄƒ investesc banii?')">
            Progres
            <span class="qbtn-text">InvestiÈ›ii</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('AjutÄƒ-mÄƒ sÄƒ-mi fac un buget mai bun')">
            Economii
            <span class="qbtn-text">Buget</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('Ce predicÈ›ii ai pentru cheltuielile mele luna asta?')">
            <span class="qbtn-icon">ğŸ”®</span>
            <span class="qbtn-text">PredicÈ›ii</span>
          </button>
        </div>
        <div class="ai-row">
          <input type="text" class="ai-input" id="aiInput" placeholder="Scrie orice Ã®ntrebare..." onkeypress="if(event.key==='Enter')sendAI()">
          <button class="ai-send" onclick="sendAI()">â¤</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Goal Modal -->
  <div id="goalModal" class="modal">
    <div class="modal-bg" onclick="closeModal('goalModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">Obiectiv</span><button class="modal-x" onclick="closeModal('goalModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="goalForm" onsubmit="saveGoal(event)">
          <input type="hidden" id="goalId">
          <div class="form-row"><label class="form-lbl">Nume</label><input type="text" id="goalName" class="form-input" required placeholder="Ex: VacanÈ›Äƒ"></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ È›intÄƒ</label><input type="number" id="goalTarget" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">Economisit</label><input type="number" id="goalSaved" class="form-input" value="0"></div>
          <div class="form-row"><label class="form-lbl">Deadline</label><input type="date" id="goalDeadline" class="form-input"></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Budget Modal -->
  <div id="budgetModal" class="modal">
    <div class="modal-bg" onclick="closeModal('budgetModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">Buget</span><button class="modal-x" onclick="closeModal('budgetModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="budgetForm" onsubmit="saveBudget(event)">
          <input type="hidden" id="budgetId">
          <div class="form-row"><label class="form-lbl">Categorie</label><select id="budgetCat" class="form-select" required></select></div>
          <div class="form-row"><label class="form-lbl">LimitÄƒ lunarÄƒ</label><input type="number" id="budgetLimit" class="form-input" required></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Account Modal -->
  <div id="accountModal" class="modal">
    <div class="modal-bg" onclick="closeModal('accountModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ¦ Cont</span><button class="modal-x" onclick="closeModal('accountModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="accountForm" onsubmit="saveAccount(event)">
          <input type="hidden" id="accountId">
          <div class="form-row"><label class="form-lbl">Nume</label><input type="text" id="accountName" class="form-input" required placeholder="Ex: ING"></div>
          <div class="form-row"><label class="form-lbl">Tip</label><select id="accountType" class="form-select"><option value="bank">ğŸ¦ BancÄƒ</option><option value="cash">ğŸ’µ Cash</option><option value="savings">ğŸ· Economii</option></select></div>
          <div class="form-row"><label class="form-lbl">Sold</label><input type="number" id="accountBal" class="form-input" required></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Debt Modal -->
  <div id="debtModal" class="modal">
    <div class="modal-bg" onclick="closeModal('debtModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ¤ Datorie</span><button class="modal-x" onclick="closeModal('debtModal')">âœ•</button></div>
      <div class="modal-body">
        <div class="type-tabs">
          <button class="type-tab exp on" data-t="owe" onclick="setDebtType('owe')">ğŸ“¤ Datorez</button>
          <button class="type-tab inc" data-t="owed" onclick="setDebtType('owed')">ğŸ“¥ Ãmi datoreazÄƒ</button>
        </div>
        <form id="debtForm" onsubmit="saveDebt(event)">
          <input type="hidden" id="debtId"><input type="hidden" id="debtType" value="owe">
          <div class="form-row"><label class="form-lbl">PersoanÄƒ</label><input type="text" id="debtPerson" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ</label><input type="number" id="debtAmount" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">Motiv</label><input type="text" id="debtNote" class="form-input"></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Reminder Modal -->
  <div id="reminderModal" class="modal">
    <div class="modal-bg" onclick="closeModal('reminderModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">â° Reminder</span><button class="modal-x" onclick="closeModal('reminderModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="reminderForm" onsubmit="saveReminder(event)">
          <input type="hidden" id="reminderId">
          <div class="form-row"><label class="form-lbl">Nume</label><input type="text" id="reminderName" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ</label><input type="number" id="reminderAmount" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">Ziua lunii</label><input type="number" id="reminderDay" class="form-input" min="1" max="31" value="1"></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Utility Modal -->
  <div id="utilityModal" class="modal">
    <div class="modal-bg" onclick="closeModal('utilityModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">FacturÄƒ</span><button class="modal-x" onclick="closeModal('utilityModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="utilityForm" onsubmit="saveUtility(event)">
          <input type="hidden" id="utilityId">
          <div class="form-row"><label class="form-lbl">Tip</label><select id="utilityType" class="form-select" required><option value="">SelecteazÄƒ</option><option value="electricity"> Curent</option><option value="gas"> Gaz</option><option value="water">ğŸ’§ ApÄƒ</option><option value="internet">ğŸ“¶ Internet</option></select></div>
          <div class="form-row"><label class="form-lbl">Luna</label><input type="month" id="utilityMonth" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ</label><input type="number" id="utilityAmount" class="form-input" required></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Recurring Transaction Modal -->
  <div id="recurringModal" class="modal">
    <div class="modal-bg" onclick="closeModal('recurringModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title" id="recurringModalTitle">ğŸ”„ TranzacÈ›ie RecurentÄƒ</span><button class="modal-x" onclick="closeModal('recurringModal')">âœ•</button></div>
      <div class="modal-body">
        <div class="type-tabs">
          <button class="type-tab exp on" data-t="expense" onclick="setRecurType('expense')">ğŸ’¸ CheltuialÄƒ</button>
          <button class="type-tab inc" data-t="income" onclick="setRecurType('income')">ğŸ’µ Venit</button>
        </div>
        <form id="recurringForm" onsubmit="saveRecurring(event)">
          <input type="hidden" id="recurType" value="expense">
          <div class="form-row">
            <label class="form-lbl">SumÄƒ</label>
            <input type="number" class="form-input" id="recurAmount" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">Categorie</label>
            <select id="recurCat" class="form-select" required></select>
          </div>
          <div class="form-row">
            <label class="form-lbl">FrecvenÈ›Äƒ</label>
            <select id="recurFreq" class="form-select" required>
              <option value="daily">Zilnic</option>
              <option value="weekly">SÄƒptÄƒmÃ¢nal</option>
              <option value="monthly" selected>Lunar</option>
              <option value="yearly">Anual</option>
            </select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Data urmÄƒtoare</label>
            <input type="date" id="recurStart" class="form-input" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">NotÄƒ</label>
            <input type="text" id="recurNote" class="form-input" placeholder="Ex: Chirie apartament">
          </div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
          <button type="button" class="submit-btn red" id="recurDeleteBtn" style="display:none;margin-top:8px" onclick="deleteRecurring(state.editingId)">ğŸ—‘ï¸ È˜terge</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Challenge Modal -->
  <div id="challengeModal" class="modal">
    <div class="modal-bg" onclick="closeModal('challengeModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">SelecteazÄƒ provocare</span><button class="modal-x" onclick="closeModal('challengeModal')">âœ•</button></div>
      <div class="modal-body">
        <div id="challengeTemplates"></div>
      </div>
    </div>
  </div>

  <!-- Day Transactions Modal -->
  <div id="dayTxModal" class="modal">
    <div class="modal-bg" onclick="closeModal('dayTxModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title" id="dayTxDate">TranzacÈ›ii</span><button class="modal-x" onclick="closeModal('dayTxModal')">âœ•</button></div>
      <div class="modal-body">
        <div id="dayTxList"></div>
      </div>
    </div>
  </div>

  <div class="toasts" id="toasts"></div>

  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
</body>
</html>
