<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Budget Pro Ultra</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash" class="splash">
        <div class="splash-content">
            <div class="splash-icon">ğŸ’</div>
            <div class="splash-title">Budget Pro</div>
            <div class="splash-subtitle">Ultra</div>
            <div class="splash-loader"></div>
        </div>
    </div>

    <!-- Auth Screen -->
    <div id="authScreen" class="screen auth-screen">
        <div class="auth-bg"></div>
        <div class="auth-container">
            <div class="auth-logo">ğŸ’</div>
            <h1 class="auth-title">Budget Pro <span>Ultra</span></h1>
            <p class="auth-subtitle">Controlul total al finanÈ›elor tale</p>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Autentificare</button>
                <button class="auth-tab" data-tab="register">Cont nou</button>
            </div>
            
            <form id="loginForm" class="auth-form active">
                <div class="input-group">
                    <span class="input-icon">ğŸ“§</span>
                    <input type="email" id="loginEmail" placeholder="Email" required>
                </div>
                <div class="input-group">
                    <span class="input-icon">ğŸ”’</span>
                    <input type="password" id="loginPassword" placeholder="ParolÄƒ" required>
                </div>
                <button type="submit" class="btn-primary">IntrÄƒ Ã®n cont</button>
            </form>
            
            <form id="registerForm" class="auth-form">
                <div class="input-group">
                    <span class="input-icon">ğŸ‘¤</span>
                    <input type="text" id="registerName" placeholder="Nume complet" required>
                </div>
                <div class="input-group">
                    <span class="input-icon">ğŸ“§</span>
                    <input type="email" id="registerEmail" placeholder="Email" required>
                </div>
                <div class="input-group">
                    <span class="input-icon">ğŸ”’</span>
                    <input type="password" id="registerPassword" placeholder="ParolÄƒ (min. 6 caractere)" required minlength="6">
                </div>
                <button type="submit" class="btn-primary">CreeazÄƒ cont</button>
            </form>
            
            <div class="auth-divider"><span>sau</span></div>
            
            <button id="googleAuth" class="btn-google">
                <svg viewBox="0 0 24 24" width="20" height="20"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                ContinuÄƒ cu Google
            </button>
        </div>
    </div>

    <!-- Main App -->
    <div id="appScreen" class="screen app-screen hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <span class="header-logo">ğŸ’</span>
                <span class="header-title">Budget Pro</span>
            </div>
            <div class="header-right">
                <button id="searchToggle" class="header-btn">ğŸ”</button>
                <button id="aiBtn" class="header-btn ai-btn">âœ¨</button>
                <button id="notifBtn" class="header-btn">ğŸ””<span class="notif-badge hidden">0</span></button>
            </div>
        </header>

        <!-- Search Bar -->
        <div id="searchBar" class="search-bar hidden">
            <div class="search-input-wrap">
                <span class="search-icon">ğŸ”</span>
                <input type="text" id="searchInput" placeholder="CautÄƒ tranzacÈ›ii, categorii, tags...">
                <button id="searchClose" class="search-close">âœ•</button>
            </div>
            <div id="searchResults" class="search-results hidden"></div>
        </div>

        <!-- Views Container -->
        <main class="main-content">
            <!-- Home View -->
            <section id="homeView" class="view active">
                <!-- Month Navigator -->
                <div class="month-nav">
                    <button id="prevMonth" class="month-btn">â®</button>
                    <span id="currentMonth">Decembrie 2025</span>
                    <button id="nextMonth" class="month-btn">â¯</button>
                </div>

                <!-- Balance Card -->
                <div class="balance-card">
                    <div class="balance-header">
                        <span class="balance-label">BalanÈ›a curentÄƒ</span>
                        <span id="balanceChange" class="balance-change positive">+0%</span>
                    </div>
                    <div id="totalBalance" class="balance-amount">0 RON</div>
                    <div class="balance-stats">
                        <div class="stat">
                            <span class="stat-icon income">â†‘</span>
                            <div class="stat-info">
                                <span class="stat-label">Venituri</span>
                                <span id="totalIncome" class="stat-value income">0 RON</span>
                            </div>
                        </div>
                        <div class="stat">
                            <span class="stat-icon expense">â†“</span>
                            <div class="stat-info">
                                <span class="stat-label">Cheltuieli</span>
                                <span id="totalExpense" class="stat-value expense">0 RON</span>
                            </div>
                        </div>
                    </div>
                    <div class="balance-progress">
                        <div class="progress-bar">
                            <div id="spentProgress" class="progress-fill"></div>
                        </div>
                        <span id="spentPercent" class="progress-label">0% din venituri cheltuit</span>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="qstat">
                        <span class="qstat-icon">ğŸ“Š</span>
                        <span class="qstat-label">Media/zi</span>
                        <span id="dailyAvg" class="qstat-value">0 RON</span>
                    </div>
                    <div class="qstat">
                        <span class="qstat-icon">ğŸ¯</span>
                        <span class="qstat-label">PredicÈ›ie</span>
                        <span id="prediction" class="qstat-value">0 RON</span>
                    </div>
                    <div class="qstat">
                        <span class="qstat-icon">ğŸ’°</span>
                        <span class="qstat-label">Economii</span>
                        <span id="savingsRate" class="qstat-value">0%</span>
                    </div>
                    <div class="qstat streak">
                        <span class="qstat-icon">ğŸ”¥</span>
                        <span class="qstat-label">Streak</span>
                        <span id="streakCount" class="qstat-value">0</span>
                    </div>
                </div>

                <!-- Health Score Card -->
                <div class="health-score-card">
                    <div class="health-info">
                        <span class="health-label">ğŸ’ª Scor SÄƒnÄƒtate FinanciarÄƒ</span>
                        <span id="healthScoreLabel" class="health-label-status">CalculeazÄƒ...</span>
                    </div>
                    <div class="health-display">
                        <span id="healthScore" class="health-score">--</span>
                        <span class="health-max">/100</span>
                    </div>
                    <div class="health-bar">
                        <div id="healthFill" class="health-fill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="section-header">
                    <h2>AcÈ›iuni rapide</h2>
                    <button onclick="startVoiceInput()" class="voice-btn" title="AdaugÄƒ cu vocea">ğŸ¤</button>
                </div>
                <div class="quick-actions">
                    <button class="action-btn expense" onclick="openTransModal('expense')">
                        <span class="action-icon">ğŸ’¸</span>
                        <span>CheltuialÄƒ</span>
                    </button>
                    <button class="action-btn income" onclick="openTransModal('income')">
                        <span class="action-icon">ğŸ’µ</span>
                        <span>Venit</span>
                    </button>
                    <button class="action-btn correction" onclick="openTransModal('correction')">
                        <span class="action-icon">âš–ï¸</span>
                        <span>CorecÈ›ie</span>
                    </button>
                    <button class="action-btn transfer" onclick="openSplitModal()">
                        <span class="action-icon">âœ‚ï¸</span>
                        <span>Split Bill</span>
                    </button>
                </div>

                <!-- AI Insights -->
                <div class="section-header">
                    <h2>ğŸ¤– Insights AI</h2>
                    <button id="refreshInsights" class="refresh-btn">â†»</button>
                </div>
                <div id="aiInsights" class="insights-carousel">
                    <div class="insight-card">
                        <span class="insight-icon">ğŸ’¡</span>
                        <p>AdaugÄƒ tranzacÈ›ii pentru insights personalizate de la AI.</p>
                    </div>
                </div>

                <!-- Smart Tips -->
                <div class="section-header">
                    <h2>ğŸ’¡ Sfaturi inteligente</h2>
                </div>
                <div id="smartTips" class="smart-tips">
                    <p class="no-tips">Se analizeazÄƒ datele...</p>
                </div>

                <!-- FIRE Progress -->
                <div class="section-header">
                    <h2>ğŸ”¥ Progres FIRE</h2>
                    <span class="fire-tooltip" title="Financial Independence, Retire Early">â“˜</span>
                </div>
                <div class="fire-card">
                    <div class="fire-header">
                        <span>Obiectiv independenÈ›Äƒ financiarÄƒ</span>
                        <span id="fireNumber" class="fire-number">-- RON</span>
                    </div>
                    <div class="fire-progress">
                        <div id="fireFill" class="fire-fill" style="width: 0%"></div>
                    </div>
                    <div class="fire-stats">
                        <div class="fire-stat">
                            <span class="fire-stat-value" id="fireProgress">0%</span>
                            <span class="fire-stat-label">Progres</span>
                        </div>
                        <div class="fire-stat">
                            <span class="fire-stat-value" id="fireYears">-- ani</span>
                            <span class="fire-stat-label">Estimare</span>
                        </div>
                    </div>
                </div>

                <!-- Accounts Preview -->
                <div class="section-header">
                    <h2>ğŸ’³ Conturi</h2>
                    <button onclick="openAccountModal()" class="see-all">+ AdaugÄƒ</button>
                </div>
                <div id="accountsPreview" class="accounts-preview">
                    <div class="empty-state small">
                        <span class="empty-icon">ğŸ’³</span>
                        <p>Niciun cont adÄƒugat</p>
                    </div>
                </div>

                <!-- Budgets Preview -->
                <div class="section-header">
                    <h2>ğŸ“Š Bugete</h2>
                    <button onclick="openBudgetModal()" class="see-all">+ SeteazÄƒ</button>
                </div>
                <div id="budgetsPreview" class="budgets-preview">
                    <div class="empty-state small">
                        <span class="empty-icon">ğŸ“Š</span>
                        <p>Niciun buget setat</p>
                    </div>
                </div>

                <!-- Chart -->
                <div class="section-header">
                    <h2>ğŸ“Š DistribuÈ›ie cheltuieli</h2>
                </div>
                <div class="chart-container">
                    <canvas id="expenseChart"></canvas>
                    <div id="chartCenter" class="chart-center">
                        <span class="chart-total">0 RON</span>
                        <span class="chart-label">Total</span>
                    </div>
                </div>
                <div id="chartLegend" class="chart-legend"></div>

                <!-- Recent Transactions -->
                <div class="section-header">
                    <h2>TranzacÈ›ii recente</h2>
                    <button onclick="switchView('transactions')" class="see-all">Vezi toate â†’</button>
                </div>
                <div id="recentTrans" class="transactions-list">
                    <div class="empty-state">
                        <span class="empty-icon">ğŸ“</span>
                        <p>Nicio tranzacÈ›ie Ã®ncÄƒ</p>
                    </div>
                </div>

                <!-- Goals Preview -->
                <div class="section-header">
                    <h2>ğŸ¯ Obiective</h2>
                    <button onclick="switchView('goals')" class="see-all">Vezi toate â†’</button>
                </div>
                <div id="goalsPreview" class="goals-preview">
                    <div class="empty-state small">
                        <span class="empty-icon">ğŸ¯</span>
                        <p>Niciun obiectiv</p>
                    </div>
                </div>

                <!-- Debts Summary -->
                <div class="section-header">
                    <h2>ğŸ¤ Datorii</h2>
                    <button onclick="switchView('debts')" class="see-all">Vezi toate â†’</button>
                </div>
                <div id="debtsPreview" class="debts-preview">
                    <div class="debt-summary">
                        <div class="debt-card owe">
                            <span class="debt-label">De plÄƒtit</span>
                            <span id="totalOwe" class="debt-amount">0 RON</span>
                        </div>
                        <div class="debt-card owed">
                            <span class="debt-label">De recuperat</span>
                            <span id="totalOwed" class="debt-amount">0 RON</span>
                        </div>
                    </div>
                </div>

                <!-- Reminders Preview -->
                <div class="section-header">
                    <h2>â° Remindere</h2>
                    <button onclick="switchView('reminders')" class="see-all">Vezi toate â†’</button>
                </div>
                <div id="remindersPreview" class="reminders-preview">
                    <div class="empty-state small">
                        <span class="empty-icon">â°</span>
                        <p>Niciun reminder</p>
                    </div>
                </div>

                <!-- Home Utilities Preview -->
                <div class="section-header">
                    <h2>ğŸ  UtilitÄƒÈ›i CasÄƒ</h2>
                    <button onclick="switchView('utilities')" class="see-all">Vezi toate â†’</button>
                </div>
                <div id="utilitiesPreview" class="utilities-preview">
                    <div class="utilities-cards">
                        <div class="utility-mini" onclick="openUtilityModal('electricity')">
                            <span class="utility-mini-icon">âš¡</span>
                            <span class="utility-mini-name">Curent</span>
                            <span id="utilElectricity" class="utility-mini-value">-- RON</span>
                        </div>
                        <div class="utility-mini" onclick="openUtilityModal('gas')">
                            <span class="utility-mini-icon">ğŸ”¥</span>
                            <span class="utility-mini-name">Gaz</span>
                            <span id="utilGas" class="utility-mini-value">-- RON</span>
                        </div>
                        <div class="utility-mini" onclick="openUtilityModal('water')">
                            <span class="utility-mini-icon">ğŸ’§</span>
                            <span class="utility-mini-name">ApÄƒ</span>
                            <span id="utilWater" class="utility-mini-value">-- RON</span>
                        </div>
                        <div class="utility-mini" onclick="openUtilityModal('internet')">
                            <span class="utility-mini-icon">ğŸ“¶</span>
                            <span class="utility-mini-name">Internet</span>
                            <span id="utilInternet" class="utility-mini-value">-- RON</span>
                        </div>
                    </div>
                    <button class="add-utility-btn" onclick="openUtilityModal()">
                        â• AdaugÄƒ facturÄƒ utilitÄƒÈ›i
                    </button>
                </div>

                <!-- Net Worth -->
                <div class="section-header">
                    <h2>ğŸ’ Patrimoniu Net</h2>
                </div>
                <div class="net-worth-card">
                    <span class="net-worth-label">Total</span>
                    <span id="netWorth" class="net-worth-value">0 RON</span>
                </div>
            </section>

            <!-- Transactions View -->
            <section id="transactionsView" class="view">
                <div class="view-header">
                    <h1>ğŸ’³ TranzacÈ›ii</h1>
                </div>
                
                <div class="filters-bar">
                    <button class="filter-btn active" data-filter="all">Toate</button>
                    <button class="filter-btn" data-filter="expense">Cheltuieli</button>
                    <button class="filter-btn" data-filter="income">Venituri</button>
                    <button class="filter-btn" data-filter="correction">CorecÈ›ii</button>
                </div>

                <div class="month-nav compact">
                    <button class="month-btn" onclick="changeMonth(-1)">â®</button>
                    <span id="transMonth">Decembrie 2025</span>
                    <button class="month-btn" onclick="changeMonth(1)">â¯</button>
                </div>

                <div id="allTransactions" class="transactions-list full">
                    <div class="empty-state">
                        <span class="empty-icon">ğŸ“</span>
                        <p>Nicio tranzacÈ›ie Ã®n aceastÄƒ lunÄƒ</p>
                    </div>
                </div>
            </section>

            <!-- Analytics View -->
            <section id="analyticsView" class="view">
                <div class="view-header">
                    <h1>ğŸ“ˆ AnalizÄƒ & Trenduri</h1>
                </div>

                <div class="period-selector">
                    <button class="period-btn" data-period="7">7 zile</button>
                    <button class="period-btn active" data-period="30">30 zile</button>
                    <button class="period-btn" data-period="90">3 luni</button>
                    <button class="period-btn" data-period="365">1 an</button>
                </div>

                <div class="analytics-summary">
                    <div class="summary-card income">
                        <span class="summary-icon">ğŸ’µ</span>
                        <div class="summary-info">
                            <span class="summary-label">Total venituri</span>
                            <span id="analyticsIncome" class="summary-value">0 RON</span>
                        </div>
                    </div>
                    <div class="summary-card expense">
                        <span class="summary-icon">ğŸ’¸</span>
                        <div class="summary-info">
                            <span class="summary-label">Total cheltuieli</span>
                            <span id="analyticsExpense" class="summary-value">0 RON</span>
                        </div>
                    </div>
                    <div class="summary-card savings">
                        <span class="summary-icon">ğŸ’°</span>
                        <div class="summary-info">
                            <span class="summary-label">Economii nete</span>
                            <span id="analyticsSavings" class="summary-value">0 RON</span>
                        </div>
                    </div>
                </div>

                <div class="section-header">
                    <h2>ğŸ“Š EvoluÈ›ie</h2>
                </div>
                <div class="trend-chart-container">
                    <canvas id="trendChart"></canvas>
                </div>

                <div class="section-header">
                    <h2>ğŸ¤– AnalizÄƒ AI</h2>
                    <button id="runAiAnalysis" class="ai-analyze-btn">AnalizeazÄƒ</button>
                </div>
                <div id="aiAnalysis" class="ai-analysis">
                    <p class="ai-placeholder">ApasÄƒ "AnalizeazÄƒ" pentru o analizÄƒ completÄƒ.</p>
                </div>

                <div class="section-header">
                    <h2>ğŸ” Pattern-uri detectate</h2>
                </div>
                <div id="patterns" class="patterns-list">
                    <div class="empty-state small"><p>AdaugÄƒ mai multe tranzacÈ›ii</p></div>
                </div>

                <div class="section-header">
                    <h2>âš ï¸ Abateri neobiÈ™nuite</h2>
                </div>
                <div id="anomalies" class="anomalies-list">
                    <div class="empty-state small"><p>Nicio abatere detectatÄƒ</p></div>
                </div>

                <div class="section-header">
                    <h2>ğŸ“‹ Detalii pe categorii</h2>
                </div>
                <div id="categoryBreakdown" class="category-breakdown"></div>
            </section>

            <!-- Goals View -->
            <section id="goalsView" class="view">
                <div class="view-header">
                    <h1>ğŸ¯ Obiective</h1>
                    <button onclick="openGoalModal()" class="add-btn">+ Nou</button>
                </div>

                <div class="goals-stats">
                    <div class="gstat">
                        <span id="activeGoals" class="gstat-value">0</span>
                        <span class="gstat-label">Active</span>
                    </div>
                    <div class="gstat">
                        <span id="completedGoals" class="gstat-value">0</span>
                        <span class="gstat-label">Complete</span>
                    </div>
                    <div class="gstat">
                        <span id="totalSaved" class="gstat-value">0 RON</span>
                        <span class="gstat-label">Economisit</span>
                    </div>
                </div>

                <div class="section-header"><h2>Ãn progres</h2></div>
                <div id="activeGoalsList" class="goals-list"></div>

                <div class="section-header"><h2>Completate</h2></div>
                <div id="completedGoalsList" class="goals-list"></div>
            </section>

            <!-- Debts View -->
            <section id="debtsView" class="view">
                <div class="view-header">
                    <h1>ğŸ¤ Datorii</h1>
                    <button onclick="openDebtModal()" class="add-btn">+ Nou</button>
                </div>

                <div class="debts-overview">
                    <div class="debt-overview-card owe">
                        <span class="debt-overview-icon">ğŸ“¤</span>
                        <div class="debt-overview-info">
                            <span class="debt-overview-label">Total de plÄƒtit</span>
                            <span id="totalToPayDebts" class="debt-overview-value">0 RON</span>
                        </div>
                    </div>
                    <div class="debt-overview-card owed">
                        <span class="debt-overview-icon">ğŸ“¥</span>
                        <div class="debt-overview-info">
                            <span class="debt-overview-label">Total de recuperat</span>
                            <span id="totalToReceiveDebts" class="debt-overview-value">0 RON</span>
                        </div>
                    </div>
                </div>

                <div class="section-header"><h2>ğŸ’¸ De plÄƒtit</h2></div>
                <div id="debtsOweList" class="debts-list"></div>

                <div class="section-header"><h2>ğŸ’µ De recuperat</h2></div>
                <div id="debtsOwedList" class="debts-list"></div>
            </section>

            <!-- Reminders View -->
            <section id="remindersView" class="view">
                <div class="view-header">
                    <h1>â° Remindere</h1>
                    <button onclick="openReminderModal()" class="add-btn">+ Nou</button>
                </div>

                <div class="section-header"><h2>UrmÄƒtoare</h2></div>
                <div id="upcomingReminders" class="reminders-list"></div>

                <div class="section-header"><h2>Toate</h2></div>
                <div id="allReminders" class="reminders-list"></div>
            </section>

            <!-- Utilities View -->
            <section id="utilitiesView" class="view">
                <div class="view-header">
                    <h1>ğŸ  UtilitÄƒÈ›i CasÄƒ</h1>
                    <button onclick="openUtilityModal()" class="add-btn">+ AdaugÄƒ</button>
                </div>

                <!-- Monthly Total -->
                <div class="utilities-total-card">
                    <div class="utilities-total-header">
                        <span>ğŸ’¡ Total utilitÄƒÈ›i luna aceasta</span>
                        <span id="utilitiesMonthLabel">Dec 2025</span>
                    </div>
                    <div id="utilitiesTotalAmount" class="utilities-total-amount">0 RON</div>
                    <div class="utilities-comparison">
                        <span id="utilitiesComparison">vs. luna trecutÄƒ: --</span>
                    </div>
                </div>

                <!-- Utilities Grid -->
                <div class="utilities-grid">
                    <div class="utility-card" onclick="openUtilityModal('electricity')">
                        <div class="utility-card-header">
                            <span class="utility-card-icon" style="background: #eab308">âš¡</span>
                            <span class="utility-card-name">Electricitate</span>
                        </div>
                        <div id="utilElectricityDetail" class="utility-card-value">-- RON</div>
                        <div id="utilElectricityUnit" class="utility-card-unit">-- kWh</div>
                        <div class="utility-card-trend">
                            <span id="utilElectricityTrend">--</span>
                        </div>
                    </div>

                    <div class="utility-card" onclick="openUtilityModal('gas')">
                        <div class="utility-card-header">
                            <span class="utility-card-icon" style="background: #f97316">ğŸ”¥</span>
                            <span class="utility-card-name">Gaz</span>
                        </div>
                        <div id="utilGasDetail" class="utility-card-value">-- RON</div>
                        <div id="utilGasUnit" class="utility-card-unit">-- mÂ³</div>
                        <div class="utility-card-trend">
                            <span id="utilGasTrend">--</span>
                        </div>
                    </div>

                    <div class="utility-card" onclick="openUtilityModal('water')">
                        <div class="utility-card-header">
                            <span class="utility-card-icon" style="background: #3b82f6">ğŸ’§</span>
                            <span class="utility-card-name">ApÄƒ</span>
                        </div>
                        <div id="utilWaterDetail" class="utility-card-value">-- RON</div>
                        <div id="utilWaterUnit" class="utility-card-unit">-- mÂ³</div>
                        <div class="utility-card-trend">
                            <span id="utilWaterTrend">--</span>
                        </div>
                    </div>

                    <div class="utility-card" onclick="openUtilityModal('heating')">
                        <div class="utility-card-header">
                            <span class="utility-card-icon" style="background: #ef4444">ğŸŒ¡ï¸</span>
                            <span class="utility-card-name">ÃncÄƒlzire</span>
                        </div>
                        <div id="utilHeatingDetail" class="utility-card-value">-- RON</div>
                        <div id="utilHeatingUnit" class="utility-card-unit">-- Gcal</div>
                        <div class="utility-card-trend">
                            <span id="utilHeatingTrend">--</span>
                        </div>
                    </div>

                    <div class="utility-card" onclick="openUtilityModal('internet')">
                        <div class="utility-card-header">
                            <span class="utility-card-icon" style="background: #8b5cf6">ğŸ“¶</span>
                            <span class="utility-card-name">Internet</span>
                        </div>
                        <div id="utilInternetDetail" class="utility-card-value">-- RON</div>
                        <div id="utilInternetUnit" class="utility-card-unit">-- Mbps</div>
                        <div class="utility-card-trend">
                            <span id="utilInternetTrend">--</span>
                        </div>
                    </div>

                    <div class="utility-card" onclick="openUtilityModal('maintenance')">
                        <div class="utility-card-header">
                            <span class="utility-card-icon" style="background: #a855f7">ğŸ¢</span>
                            <span class="utility-card-name">ÃntreÈ›inere</span>
                        </div>
                        <div id="utilMaintenanceDetail" class="utility-card-value">-- RON</div>
                        <div id="utilMaintenanceUnit" class="utility-card-unit">--</div>
                        <div class="utility-card-trend">
                            <span id="utilMaintenanceTrend">--</span>
                        </div>
                    </div>
                </div>

                <!-- Utilities Chart -->
                <div class="section-header">
                    <h2>ğŸ“Š EvoluÈ›ie 12 luni</h2>
                </div>
                <div class="chart-container utilities-chart">
                    <canvas id="utilitiesChart"></canvas>
                </div>

                <!-- Utilities History -->
                <div class="section-header">
                    <h2>ğŸ“œ Istoric facturi</h2>
                </div>
                <div id="utilitiesHistory" class="utilities-history">
                    <div class="empty-state small">
                        <span class="empty-icon">ğŸ“„</span>
                        <p>Nicio facturÄƒ Ã®nregistratÄƒ</p>
                    </div>
                </div>
            </section>

            <!-- Profile View -->
            <section id="profileView" class="view">
                <div class="view-header">
                    <h1>ğŸ‘¤ Profil</h1>
                </div>

                <div class="profile-card">
                    <div id="profileAvatar" class="profile-avatar">U</div>
                    <div class="profile-info">
                        <span id="profileName" class="profile-name">Utilizator</span>
                        <span id="profileEmail" class="profile-email">email@example.com</span>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="pstat">
                        <span id="totalTransCount" class="pstat-value">0</span>
                        <span class="pstat-label">TranzacÈ›ii</span>
                    </div>
                    <div class="pstat">
                        <span id="memberSince" class="pstat-value">-</span>
                        <span class="pstat-label">Membru din</span>
                    </div>
                    <div class="pstat">
                        <span id="streakDays" class="pstat-value">0</span>
                        <span class="pstat-label">Zile streak</span>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>âš™ï¸ SetÄƒri</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">ğŸ’±</span>
                            <span class="setting-label">MonedÄƒ</span>
                        </div>
                        <select id="currencySelect" class="setting-select">
                            <option value="RON">RON</option>
                            <option value="EUR">EUR</option>
                            <option value="USD">USD</option>
                            <option value="GBP">GBP</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">ğŸŒ™</span>
                            <span class="setting-label">TemÄƒ</span>
                        </div>
                        <button onclick="toggleTheme()" class="theme-toggle">
                            <span id="themeIcon">ğŸŒ™</span>
                        </button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>ğŸ“¥ Import date</h3>
                    <div class="import-buttons">
                        <button onclick="openModal('importPdfModal')" class="import-btn">ğŸ“„ Import PDF extras bancÄƒ</button>
                    </div>
                    <p class="import-desc">ImportÄƒ tranzacÈ›ii din PDF È™i lasÄƒ AI-ul sÄƒ le categoriseze automat</p>
                </div>

                <div class="settings-section">
                    <h3>ğŸ“¤ Export date</h3>
                    <div class="export-buttons">
                        <button onclick="exportJSON()" class="export-btn">ğŸ“„ JSON</button>
                        <button onclick="exportCSV()" class="export-btn">ğŸ“Š CSV</button>
                        <button onclick="exportDetailedReport()" class="export-btn highlight">ğŸ“ˆ Raport complet</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>ğŸ§® Calculatoare</h3>
                    <div class="calculator-buttons">
                        <button onclick="showSavingsCalculator()" class="calc-btn">ğŸ’° Calculator economii</button>
                        <button onclick="showFIRECalculator()" class="calc-btn">ğŸ”¥ Calculator FIRE</button>
                    </div>
                </div>

                <div class="settings-section danger">
                    <h3>âš ï¸ Zona periculoasÄƒ</h3>
                    <button onclick="clearAllData()" class="danger-btn">ğŸ—‘ï¸ È˜terge toate datele</button>
                    <button onclick="logout()" class="logout-btn">ğŸšª Deconectare</button>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="home">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-label">AcasÄƒ</span>
            </button>
            <button class="nav-item" data-view="transactions">
                <span class="nav-icon">ğŸ’³</span>
                <span class="nav-label">TranzacÈ›ii</span>
            </button>
            <button class="nav-item add-nav" onclick="openTransModal('expense')">
                <span class="nav-icon-add">+</span>
            </button>
            <button class="nav-item" data-view="analytics">
                <span class="nav-icon">ğŸ“ˆ</span>
                <span class="nav-label">AnalizÄƒ</span>
            </button>
            <button class="nav-item" data-view="profile">
                <span class="nav-icon">ğŸ‘¤</span>
                <span class="nav-label">Profil</span>
            </button>
        </nav>
    </div>

    <!-- Transaction Modal -->
    <div id="transModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('transModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="transModalTitle">AdaugÄƒ tranzacÈ›ie</h2>
                <button class="modal-close" onclick="closeModal('transModal')">âœ•</button>
            </div>
            
            <div class="trans-type-tabs">
                <button class="type-tab active" data-type="expense">ğŸ’¸ CheltuialÄƒ</button>
                <button class="type-tab" data-type="income">ğŸ’µ Venit</button>
                <button class="type-tab" data-type="correction">âš–ï¸ CorecÈ›ie</button>
            </div>

            <form id="transForm" class="modal-form">
                <input type="hidden" id="transId">
                <input type="hidden" id="transType" value="expense">

                <div class="form-group">
                    <label>SumÄƒ</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="transAmount" placeholder="0.00" step="0.01" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Categorie</label>
                    <select id="transCategory" required></select>
                </div>

                <div class="form-group">
                    <label>Subcategorie</label>
                    <select id="transSubcategory"></select>
                </div>

                <div class="form-group">
                    <label>Descriere (opÈ›ional)</label>
                    <input type="text" id="transDescription" placeholder="Detalii...">
                </div>

                <div class="form-group">
                    <label>Tags (separate cu virgulÄƒ)</label>
                    <input type="text" id="transTags" placeholder="ex: urgent, luna, cadou">
                </div>

                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="transDate" required>
                </div>

                <div class="form-group recurring-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="transRecurring">
                        <span>TranzacÈ›ie recurentÄƒ</span>
                    </label>
                </div>

                <div id="recurringOptions" class="recurring-options hidden">
                    <div class="form-group">
                        <label>RepetÄƒ</label>
                        <select id="recurringFreq">
                            <option value="daily">Zilnic</option>
                            <option value="weekly">SÄƒptÄƒmÃ¢nal</option>
                            <option value="monthly" selected>Lunar</option>
                            <option value="yearly">Anual</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="btn-submit">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <!-- AI Chat Modal -->
    <div id="aiModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('aiModal')"></div>
        <div class="modal-content ai-modal">
            <div class="modal-header">
                <h2>âœ¨ Asistent AI</h2>
                <button class="modal-close" onclick="closeModal('aiModal')">âœ•</button>
            </div>

            <div id="aiMessages" class="ai-messages">
                <div class="ai-message assistant">
                    <div class="ai-avatar">ğŸ¤–</div>
                    <div class="ai-bubble">
                        <p>BunÄƒ! Sunt asistentul tÄƒu financiar AI. ÃntreabÄƒ-mÄƒ orice despre finanÈ›ele tale!</p>
                        <p class="ai-hint">Exemple: "AnalizeazÄƒ cheltuielile", "Cum economisesc?", "PredicÈ›ie luna asta?"</p>
                    </div>
                </div>
            </div>

            <div class="ai-quick-actions">
                <button class="ai-quick" onclick="askAI('FÄƒ o analizÄƒ completÄƒ a finanÈ›elor mele')">ğŸ“Š AnalizÄƒ</button>
                <button class="ai-quick" onclick="askAI('Ce pattern-uri de cheltuieli am?')">ğŸ” Pattern-uri</button>
                <button class="ai-quick" onclick="askAI('DÄƒ-mi sfaturi de economisire')">ğŸ’¡ Sfaturi</button>
                <button class="ai-quick" onclick="askAI('Care e predicÈ›ia pentru aceastÄƒ lunÄƒ?')">ğŸ¯ PredicÈ›ie</button>
                <button class="ai-quick" onclick="askAI('CreeazÄƒ un plan de buget pentru mine')">ğŸ“‹ Plan buget</button>
            </div>

            <div class="ai-input-wrap">
                <input type="text" id="aiInput" placeholder="ÃntreabÄƒ orice...">
                <button id="aiSend" class="ai-send">â¤</button>
            </div>
        </div>
    </div>

    <!-- Goal Modal -->
    <div id="goalModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('goalModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="goalModalTitle">Obiectiv nou</h2>
                <button class="modal-close" onclick="closeModal('goalModal')">âœ•</button>
            </div>

            <form id="goalForm" class="modal-form">
                <input type="hidden" id="goalId">

                <div class="form-group">
                    <label>Nume obiectiv</label>
                    <input type="text" id="goalName" placeholder="ex: VacanÈ›Äƒ Ã®n Grecia" required>
                </div>

                <div class="form-group">
                    <label>SumÄƒ È›intÄƒ</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="goalTarget" placeholder="0.00" step="0.01" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>SumÄƒ economisitÄƒ</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="goalSaved" placeholder="0.00" step="0.01" value="0">
                    </div>
                </div>

                <div class="form-group">
                    <label>Deadline (opÈ›ional)</label>
                    <input type="date" id="goalDeadline">
                </div>

                <div class="form-group">
                    <label>Icon</label>
                    <div class="icon-picker">
                        <button type="button" class="icon-btn active" data-icon="ğŸ¯">ğŸ¯</button>
                        <button type="button" class="icon-btn" data-icon="ğŸ–ï¸">ğŸ–ï¸</button>
                        <button type="button" class="icon-btn" data-icon="ğŸš—">ğŸš—</button>
                        <button type="button" class="icon-btn" data-icon="ğŸ ">ğŸ </button>
                        <button type="button" class="icon-btn" data-icon="ğŸ’»">ğŸ’»</button>
                        <button type="button" class="icon-btn" data-icon="ğŸ“±">ğŸ“±</button>
                        <button type="button" class="icon-btn" data-icon="ğŸ’">ğŸ’</button>
                        <button type="button" class="icon-btn" data-icon="âœˆï¸">âœˆï¸</button>
                        <button type="button" class="icon-btn" data-icon="ğŸ’°">ğŸ’°</button>
                        <button type="button" class="icon-btn" data-icon="ğŸ">ğŸ</button>
                    </div>
                    <input type="hidden" id="goalIcon" value="ğŸ¯">
                </div>

                <button type="submit" class="btn-submit">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <!-- Debt Modal -->
    <div id="debtModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('debtModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="debtModalTitle">AdaugÄƒ datorie</h2>
                <button class="modal-close" onclick="closeModal('debtModal')">âœ•</button>
            </div>

            <div class="debt-type-tabs">
                <button class="debt-tab active" data-type="owe">ğŸ’¸ De plÄƒtit</button>
                <button class="debt-tab" data-type="owed">ğŸ’µ De recuperat</button>
            </div>

            <form id="debtForm" class="modal-form">
                <input type="hidden" id="debtId">
                <input type="hidden" id="debtType" value="owe">

                <div class="form-group">
                    <label id="personLabel">Cui datorezi?</label>
                    <input type="text" id="debtPerson" placeholder="Nume persoanÄƒ" required>
                </div>

                <div class="form-group">
                    <label>SumÄƒ</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="debtAmount" placeholder="0.00" step="0.01" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Motiv (opÈ›ional)</label>
                    <input type="text" id="debtReason" placeholder="Pentru ce?">
                </div>

                <div class="form-group">
                    <label>Deadline (opÈ›ional)</label>
                    <input type="date" id="debtDeadline">
                </div>

                <button type="submit" class="btn-submit">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <!-- Reminder Modal -->
    <div id="reminderModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('reminderModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="reminderModalTitle">Reminder nou</h2>
                <button class="modal-close" onclick="closeModal('reminderModal')">âœ•</button>
            </div>

            <form id="reminderForm" class="modal-form">
                <input type="hidden" id="reminderId">

                <div class="form-group">
                    <label>Titlu</label>
                    <input type="text" id="reminderTitle" placeholder="ex: PlatÄƒ chirie" required>
                </div>

                <div class="form-group">
                    <label>SumÄƒ (opÈ›ional)</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="reminderAmount" placeholder="0.00" step="0.01">
                    </div>
                </div>

                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="reminderDate" required>
                </div>

                <div class="form-group">
                    <label>RepetÄƒ</label>
                    <select id="reminderRepeat">
                        <option value="once">O singurÄƒ datÄƒ</option>
                        <option value="weekly">SÄƒptÄƒmÃ¢nal</option>
                        <option value="monthly">Lunar</option>
                        <option value="yearly">Anual</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Categorie (opÈ›ional)</label>
                    <select id="reminderCategory">
                        <option value="">Alege...</option>
                    </select>
                </div>

                <button type="submit" class="btn-submit">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <!-- Account Modal -->
    <div id="accountModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('accountModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="accountModalTitle">Cont nou</h2>
                <button class="modal-close" onclick="closeModal('accountModal')">âœ•</button>
            </div>

            <form id="accountForm" class="modal-form">
                <input type="hidden" id="accountId">

                <div class="form-group">
                    <label>Nume cont</label>
                    <input type="text" id="accountName" placeholder="ex: ING Principal" required>
                </div>

                <div class="form-group">
                    <label>Tip cont</label>
                    <select id="accountType">
                        <option value="checking">Cont curent</option>
                        <option value="savings">Cont economii</option>
                        <option value="cash">Numerar</option>
                        <option value="credit">Card credit</option>
                        <option value="investment">InvestiÈ›ii</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Sold curent</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="accountBalance" placeholder="0.00" step="0.01" value="0">
                    </div>
                </div>

                <div class="form-group">
                    <label>Culoare</label>
                    <input type="color" id="accountColor" value="#8b5cf6" class="color-input">
                </div>

                <button type="submit" class="btn-submit">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <!-- Budget Modal -->
    <div id="budgetModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('budgetModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="budgetModalTitle">SeteazÄƒ buget</h2>
                <button class="modal-close" onclick="closeModal('budgetModal')">âœ•</button>
            </div>

            <form id="budgetForm" class="modal-form">
                <input type="hidden" id="budgetId">

                <div class="form-group">
                    <label>Categorie</label>
                    <select id="budgetCategory" required></select>
                </div>

                <div class="form-group">
                    <label>LimitÄƒ lunarÄƒ</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="budgetLimit" placeholder="0.00" step="0.01" required>
                    </div>
                </div>

                <button type="submit" class="btn-submit">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <!-- Split Bill Modal -->
    <div id="splitModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('splitModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>âœ‚ï¸ Split Bill</h2>
                <button class="modal-close" onclick="closeModal('splitModal')">âœ•</button>
            </div>

            <form id="splitForm" class="modal-form" onsubmit="handleSplitSubmit(event)">
                <input type="hidden" id="splitId">

                <div class="form-group">
                    <label>Suma totalÄƒ</label>
                    <div class="amount-input">
                        <span class="currency">RON</span>
                        <input type="number" id="splitAmount" placeholder="0.00" step="0.01" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Persoane (separate cu virgulÄƒ)</label>
                    <input type="text" id="splitPeople" placeholder="Maria, Ion, Ana" required>
                    <small class="form-hint">Tu eÈ™ti inclus automat</small>
                </div>

                <div class="form-group">
                    <label>Descriere (opÈ›ional)</label>
                    <input type="text" id="splitDescription" placeholder="ex: Cina la restaurant">
                </div>

                <div class="split-preview">
                    <span class="split-info">ğŸ’¡ Suma va fi Ã®mpÄƒrÈ›itÄƒ egal Ã®ntre toÈ›i participanÈ›ii</span>
                </div>

                <button type="submit" class="btn-submit">Ãmparte & CreeazÄƒ datorii</button>
            </form>
        </div>
    </div>

    <!-- Utility Modal -->
    <div id="utilityModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('utilityModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="utilityModalTitle">â• AdaugÄƒ facturÄƒ utilitÄƒÈ›i</h2>
                <button class="modal-close" onclick="closeModal('utilityModal')">âœ•</button>
            </div>
            
            <form id="utilityForm" onsubmit="saveUtility(event)">
                <input type="hidden" id="utilityId">
                
                <label>Tip utilitate</label>
                <select id="utilityType" required>
                    <option value="">SelecteazÄƒ...</option>
                    <option value="electricity">âš¡ Electricitate</option>
                    <option value="gas">ğŸ”¥ Gaz</option>
                    <option value="water">ğŸ’§ ApÄƒ</option>
                    <option value="heating">ğŸŒ¡ï¸ ÃncÄƒlzire centralÄƒ</option>
                    <option value="internet">ğŸ“¶ Internet</option>
                    <option value="phone">ğŸ“± Telefon</option>
                    <option value="tv">ğŸ“º TV/Streaming</option>
                    <option value="trash">ğŸ—‘ï¸ Gunoi</option>
                    <option value="maintenance">ğŸ¢ ÃntreÈ›inere bloc</option>
                </select>

                <label>Luna facturii</label>
                <input type="month" id="utilityMonth" required>

                <label>SumÄƒ (RON)</label>
                <input type="number" id="utilityAmount" step="0.01" required placeholder="0.00">

                <label>Consum (opÈ›ional)</label>
                <div class="input-with-unit">
                    <input type="number" id="utilityConsumption" step="0.01" placeholder="Ex: 150">
                    <span id="utilityUnit" class="input-unit">kWh</span>
                </div>

                <label>Furnizor</label>
                <input type="text" id="utilityProvider" placeholder="Ex: Enel, E.ON, Digi...">

                <label>Note (opÈ›ional)</label>
                <textarea id="utilityNote" rows="2" placeholder="Detalii adiÈ›ionale..."></textarea>

                <button type="submit" class="btn-submit">ğŸ’¾ SalveazÄƒ factura</button>
            </form>
        </div>
    </div>

    <!-- Import PDF Modal -->
    <div id="importPdfModal" class="modal">
        <div class="modal-overlay" onclick="closeModal('importPdfModal')"></div>
        <div class="modal-content ai-modal">
            <div class="modal-header">
                <h2>ğŸ“„ Import PDF & Categorisire AI</h2>
                <button class="modal-close" onclick="closeModal('importPdfModal')">âœ•</button>
            </div>
            
            <div class="import-info">
                <p>ğŸ“Œ ÃncarcÄƒ un extras de cont PDF È™i AI-ul va categorisa automat tranzacÈ›iile.</p>
                <p class="import-note">FuncÈ›ioneazÄƒ cu extrase de la: BT, ING, BCR, Raiffeisen, BRD, Revolut, etc.</p>
            </div>

            <div class="import-dropzone" id="pdfDropzone">
                <span class="dropzone-icon">ğŸ“</span>
                <p>Trage PDF-ul aici sau click pentru a selecta</p>
                <input type="file" id="pdfFileInput" accept=".pdf" hidden>
            </div>

            <div id="importProgress" class="import-progress hidden">
                <div class="import-progress-bar">
                    <div id="importProgressFill" class="import-progress-fill"></div>
                </div>
                <span id="importStatus">Se proceseazÄƒ...</span>
            </div>

            <div id="importPreview" class="import-preview hidden">
                <div class="import-preview-header">
                    <span id="importCount">0 tranzacÈ›ii gÄƒsite</span>
                    <button onclick="clearImportPreview()" class="btn-link">ğŸ—‘ï¸ È˜terge</button>
                </div>
                <div id="importTransList" class="import-trans-list"></div>
                <button onclick="confirmImport()" class="btn-submit">âœ… ImportÄƒ toate tranzacÈ›iile</button>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-container" id="fabContainer">
        <div class="fab-menu">
            <button class="fab-menu-item" onclick="openTransModal('expense')">ğŸ’¸ CheltuialÄƒ</button>
            <button class="fab-menu-item" onclick="openTransModal('income')">ğŸ’µ Venit</button>
            <button class="fab-menu-item" onclick="openModal('aiModal')">ğŸ¤– ÃntreabÄƒ AI</button>
            <button class="fab-menu-item" onclick="openUtilityModal()">ğŸ  FacturÄƒ utilitÄƒÈ›i</button>
        </div>
        <button class="fab" onclick="toggleFab()">+</button>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- PWA Install Prompt -->
    <div id="installPrompt" class="install-prompt hidden">
        <div class="install-content">
            <span class="install-icon">ğŸ’</span>
            <div class="install-text">
                <strong>InstaleazÄƒ Budget Pro</strong>
                <p>AdaugÄƒ pe ecranul principal pentru acces rapid</p>
            </div>
            <button id="installBtn" class="install-btn">InstaleazÄƒ</button>
            <button id="installDismiss" class="install-dismiss">âœ•</button>
        </div>
    </div>

    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator hidden">
        <span>ğŸ“´ EÈ™ti offline</span>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
    
    <!-- PWA Service Worker & Install -->
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('âœ… Service Worker registered:', reg.scope))
                    .catch(err => console.log('âŒ SW registration failed:', err));
            });
        }

        // PWA Install Prompt
        let deferredPrompt;
        const installPrompt = document.getElementById('installPrompt');
        const installBtn = document.getElementById('installBtn');
        const installDismiss = document.getElementById('installDismiss');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install prompt after 30 seconds
            setTimeout(() => {
                if (deferredPrompt && !localStorage.getItem('pwaInstallDismissed')) {
                    installPrompt.classList.remove('hidden');
                }
            }, 30000);
        });

        installBtn?.addEventListener('click', async () => {
            if (!deferredPrompt) return;
            
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            
            console.log('Install outcome:', outcome);
            deferredPrompt = null;
            installPrompt.classList.add('hidden');
        });

        installDismiss?.addEventListener('click', () => {
            installPrompt.classList.add('hidden');
            localStorage.setItem('pwaInstallDismissed', 'true');
        });

        window.addEventListener('appinstalled', () => {
            console.log('ğŸ‰ PWA installed!');
            installPrompt.classList.add('hidden');
            deferredPrompt = null;
        });

        // Offline detection
        const offlineIndicator = document.getElementById('offlineIndicator');
        
        window.addEventListener('online', () => {
            offlineIndicator.classList.add('hidden');
            document.body.classList.remove('offline');
        });
        
        window.addEventListener('offline', () => {
            offlineIndicator.classList.remove('hidden');
            document.body.classList.add('offline');
        });

        // Check initial state
        if (!navigator.onLine) {
            offlineIndicator.classList.remove('hidden');
            document.body.classList.add('offline');
        }
    </script>
</body>
</html>
