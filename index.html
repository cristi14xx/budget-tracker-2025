<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Budget Pro</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Splash -->
  <div id="splash">
    <div class="splash-box">
      <div class="splash-icon">ğŸ’°</div>
      <div class="splash-name">Budget Pro</div>
    </div>
  </div>

  <!-- Auth -->
  <div id="auth" class="hide">
    <div class="auth-head">
      <div class="auth-icon">ğŸ’°</div>
      <h1>Budget Pro</h1>
      <p>FinanÈ›ele tale, simplificate</p>
    </div>
    
    <!-- Google Sign-In Button -->
    <button class="google-btn" onclick="doGoogleLogin()">
      <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
      </svg>
      ContinuÄƒ cu Google
    </button>
    
    <div class="auth-divider">
      <span>sau</span>
    </div>
    
    <div class="auth-tabs">
      <button class="auth-tab on" onclick="showTab('login')">Conectare</button>
      <button class="auth-tab" onclick="showTab('register')">Ãnregistrare</button>
    </div>
    <form id="loginForm" class="auth-form" onsubmit="doLogin(event)">
      <input type="email" class="auth-input" id="loginEmail" placeholder="Email" required>
      <input type="password" class="auth-input" id="loginPass" placeholder="ParolÄƒ" required>
      <button type="submit" class="auth-btn">ConecteazÄƒ-te</button>
    </form>
    <form id="registerForm" class="auth-form hide" onsubmit="doRegister(event)">
      <input type="text" class="auth-input" id="regName" placeholder="Nume" required>
      <input type="email" class="auth-input" id="regEmail" placeholder="Email" required>
      <input type="password" class="auth-input" id="regPass" placeholder="ParolÄƒ" required>
      <button type="submit" class="auth-btn">CreeazÄƒ cont</button>
    </form>
  </div>

  <!-- App -->
  <div id="app" class="hide">
    <header class="hdr">
      <button class="hdr-btn" onclick="openModal('aiModal')">ğŸ¤–</button>
      <span class="hdr-title" id="hdrTitle">Budget Pro</span>
      <div class="hdr-avatar" id="hdrAvatar" onclick="nav('menu')">U</div>
    </header>

    <main class="content">
      <!-- HOME -->
      <section id="homeView" class="view on">
        <div class="welcome">
          <h2 id="welcomeText">BunÄƒ! ğŸ‘‹</h2>
          <p id="welcomeSub">SÄƒ vedem cum stai cu banii</p>
        </div>

        <div class="hero">
          <div class="hero-label">BalanÈ›a lunii</div>
          <div class="hero-bal" id="heroBal">0 RON</div>
          <div class="hero-row">
            <div class="hero-stat">
              <div class="hero-stat-icon up">â†‘</div>
              <div class="hero-stat-lbl">Venituri</div>
              <div class="hero-stat-val grn" id="heroInc">0</div>
            </div>
            <div class="hero-stat">
              <div class="hero-stat-icon dn">â†“</div>
              <div class="hero-stat-lbl">Cheltuieli</div>
              <div class="hero-stat-val red" id="heroExp">0</div>
            </div>
          </div>
        </div>

        <div class="month-nav">
          <button class="month-btn" onclick="prevMonth()">â€¹</button>
          <span class="month-txt" id="monthTxt">Dec 2024</span>
          <button class="month-btn" onclick="nextMonth()">â€º</button>
        </div>

        <div class="stats-row">
          <div class="stat-box">
            <div class="stat-val" id="statSave">0%</div>
            <div class="stat-lbl">Economisit</div>
          </div>
          <div class="stat-box">
            <div class="stat-val" id="statDaily">0</div>
            <div class="stat-lbl">Media/zi</div>
          </div>
          <div class="stat-box">
            <div class="stat-val" id="statStreak">0ğŸ”¥</div>
            <div class="stat-lbl">Streak</div>
          </div>
        </div>

        <section class="section">
          <div class="sec-head">
            <h3 class="sec-title">TranzacÈ›ii recente</h3>
            <button class="sec-link" onclick="nav('transactions')">Vezi toate</button>
          </div>
          <div class="tx-list" id="recentTx"></div>
        </section>
      </section>

      <!-- TRANSACTIONS -->
      <section id="transactionsView" class="view">
        <div class="search-box">
          <span>ğŸ”</span>
          <input type="text" id="searchIn" placeholder="CautÄƒ..." oninput="doSearch()">
          <button onclick="nav('calendar')" style="background:var(--card2);border:none;color:var(--text);padding:8px;border-radius:8px;cursor:pointer;">ğŸ“…</button>
        </div>
        <div class="filters">
          <button class="flt-btn on" data-f="all" onclick="setFilter('all')">Toate</button>
          <button class="flt-btn" data-f="expense" onclick="setFilter('expense')">Cheltuieli</button>
          <button class="flt-btn" data-f="income" onclick="setFilter('income')">Venituri</button>
        </div>
        <div class="month-nav">
          <button class="month-btn" onclick="prevMonth()">â€¹</button>
          <span class="month-txt" id="txMonthTxt">Dec 2024</span>
          <button class="month-btn" onclick="nextMonth()">â€º</button>
        </div>
        <div class="tx-list" id="allTx"></div>
      </section>

      <!-- ANALYTICS -->
      <section id="analyticsView" class="view">
        <div class="score-card">
          <div class="score-lbl">ğŸ’ª Scor sÄƒnÄƒtate financiarÄƒ</div>
          <div class="score-num" id="scoreNum">--</div>
          <div class="score-bar"><div class="score-fill" id="scoreFill" style="width:0%"></div></div>
        </div>
        <div class="metric-grid">
          <div class="metric-box">
            <div class="metric-icon">ğŸ”¥</div>
            <div class="metric-val" id="metricFire">0%</div>
            <div class="metric-lbl">Progres FIRE</div>
          </div>
          <div class="metric-box">
            <div class="metric-icon">ğŸ“…</div>
            <div class="metric-val" id="metricYears">--</div>
            <div class="metric-lbl">Ani pÃ¢nÄƒ FIRE</div>
          </div>
        </div>
        <div class="chart-box">
          <div class="chart-title">ğŸ“ˆ Trend 6 luni</div>
          <div class="chart-area"><canvas id="trendChart"></canvas></div>
        </div>
        <section class="section">
          <div class="sec-head"><h3 class="sec-title">ğŸ’¡ Sfaturi smart</h3></div>
          <div id="tipsList"></div>
        </section>
      </section>

      <!-- BUDGETS -->
      <section id="budgetsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('home')">â†</button>
          <h2 class="sub-title">Bugete</h2>
          <button class="add-btn" onclick="openBudgetModal()">+</button>
        </div>
        <div id="budgetsList"></div>
      </section>

      <!-- MENU -->
      <section id="menuView" class="view">
        <div class="profile-box">
          <div class="profile-pic" id="profilePic">U</div>
          <div class="profile-info">
            <div class="profile-name" id="profileName">Utilizator</div>
            <div class="profile-email" id="profileEmail">email@example.com</div>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">FinanÈ›e</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('goals')"><span class="menu-icon">ğŸ¯</span><span class="menu-txt">Obiective</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('accounts')"><span class="menu-icon">ğŸ¦</span><span class="menu-txt">Conturi</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('debts')"><span class="menu-icon">ğŸ¤</span><span class="menu-txt">Datorii</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('recurring')"><span class="menu-icon">ğŸ”„</span><span class="menu-txt">Recurente</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('subscriptions')"><span class="menu-icon">ğŸ“±</span><span class="menu-txt">Abonamente</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('challenges')"><span class="menu-icon">ğŸ¯</span><span class="menu-txt">ProvocÄƒri</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">AnalizÄƒ</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('netWorth')"><span class="menu-icon">ğŸ“ˆ</span><span class="menu-txt">EvoluÈ›ie Patrimoniu</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('insights')"><span class="menu-icon">ğŸ¤–</span><span class="menu-txt">AI Insights</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">Personalizare</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('customcats')"><span class="menu-icon">ğŸ·ï¸</span><span class="menu-txt">Categorii Custom</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">CasÄƒ</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('utilities')"><span class="menu-icon">ğŸ’¡</span><span class="menu-txt">UtilitÄƒÈ›i</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('reminders')"><span class="menu-icon">â°</span><span class="menu-txt">Remindere</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-lbl">Altele</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="nav('achievements')"><span class="menu-icon">ğŸ†</span><span class="menu-txt">Achievements</span><span class="menu-arr">â€º</span></button>
            <button class="menu-item" onclick="nav('settings')"><span class="menu-icon">âš™ï¸</span><span class="menu-txt">SetÄƒri</span><span class="menu-arr">â€º</span></button>
          </div>
        </div>

        <div class="menu-sec">
          <div class="menu-grp">
            <button class="menu-item danger" onclick="doLogout()"><span class="menu-icon">ğŸšª</span><span class="menu-txt">Deconectare</span></button>
          </div>
        </div>
      </section>

      <!-- GOALS -->
      <section id="goalsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Obiective</h2>
          <button class="add-btn" onclick="openGoalModal()">+</button>
        </div>
        <div id="goalsList"></div>
      </section>

      <!-- ACCOUNTS -->
      <section id="accountsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Conturi</h2>
          <button class="add-btn" onclick="openAccountModal()">+</button>
        </div>
        <div id="accountsList"></div>
      </section>

      <!-- DEBTS -->
      <section id="debtsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Datorii</h2>
          <button class="add-btn" onclick="openDebtModal()">+</button>
        </div>
        <div id="debtsList"></div>
      </section>

      <!-- UTILITIES -->
      <section id="utilitiesView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">UtilitÄƒÈ›i</h2>
          <button class="add-btn" onclick="openUtilityModal()">+</button>
        </div>
        <div class="util-grid">
          <div class="util-card" onclick="openUtilityModal('electricity')">
            <div class="util-icon" style="background:rgba(234,179,8,0.2)">âš¡</div>
            <div class="util-name">Curent</div>
            <div class="util-val" id="uElec">--</div>
          </div>
          <div class="util-card" onclick="openUtilityModal('gas')">
            <div class="util-icon" style="background:rgba(249,115,22,0.2)">ğŸ”¥</div>
            <div class="util-name">Gaz</div>
            <div class="util-val" id="uGas">--</div>
          </div>
          <div class="util-card" onclick="openUtilityModal('water')">
            <div class="util-icon" style="background:rgba(59,130,246,0.2)">ğŸ’§</div>
            <div class="util-name">ApÄƒ</div>
            <div class="util-val" id="uWater">--</div>
          </div>
          <div class="util-card" onclick="openUtilityModal('internet')">
            <div class="util-icon" style="background:rgba(139,92,246,0.2)">ğŸ“¶</div>
            <div class="util-name">Internet</div>
            <div class="util-val" id="uNet">--</div>
          </div>
        </div>
        <div id="utilHistory"></div>
      </section>

      <!-- REMINDERS -->
      <section id="remindersView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Remindere</h2>
          <button class="add-btn" onclick="openReminderModal()">+</button>
        </div>
        <div id="remindersList"></div>
      </section>

      <!-- ACHIEVEMENTS -->
      <section id="achievementsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Achievements</h2>
        </div>
        <div class="ach-hero">
          <div class="ach-count" id="achCount">0/30</div>
          <div class="ach-lbl">deblocate</div>
        </div>
        <div class="ach-grid" id="achGrid"></div>
      </section>

      <!-- SETTINGS -->
      <section id="settingsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">SetÄƒri</h2>
        </div>
        <div class="menu-sec">
          <div class="menu-lbl">PreferinÈ›e</div>
          <div class="menu-grp">
            <div class="menu-item">
              <span class="menu-icon">ğŸ’±</span>
              <span class="menu-txt">MonedÄƒ</span>
              <select id="currSel" onchange="setCurrency(this.value)" style="background:var(--card2);border:1px solid var(--border);color:#fff;padding:8px;border-radius:8px;">
                <option value="RON">RON</option>
                <option value="EUR">EUR</option>
                <option value="USD">USD</option>
              </select>
            </div>
          </div>
        </div>
        <div class="menu-sec">
          <div class="menu-lbl">Date</div>
          <div class="menu-grp">
            <button class="menu-item" onclick="exportData()"><span class="menu-icon">ğŸ“¤</span><span class="menu-txt">Export date</span></button>
            <button class="menu-item danger" onclick="clearData()"><span class="menu-icon">ğŸ—‘ï¸</span><span class="menu-txt">È˜terge toate datele</span></button>
          </div>
        </div>
        <div class="menu-sec">
          <div class="menu-lbl">FIRE Calculator</div>
          <div class="menu-grp">
            <div class="menu-item">
              <span class="menu-icon">ğŸ’°</span>
              <input type="number" id="netWorthIn" placeholder="Patrimoniu total" style="flex:1;background:var(--card2);border:1px solid var(--border);color:#fff;padding:8px;border-radius:8px;">
              <button onclick="saveNetWorth()" style="background:var(--accent);border:none;color:#000;padding:8px 14px;border-radius:8px;font-weight:600;margin-left:8px;">Save</button>
            </div>
          </div>
        </div>
      </section>

      <!-- RECURRING -->
      <section id="recurringView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">TranzacÈ›ii Recurente</h2>
          <button class="add-btn" onclick="openRecurringModal()">+</button>
        </div>
        <div id="recurringList"></div>
      </section>

      <!-- SUBSCRIPTIONS -->
      <section id="subscriptionsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Abonamente</h2>
        </div>
        <div id="subsList"></div>
      </section>

      <!-- CALENDAR -->
      <section id="calendarView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('transactions')">â†</button>
          <h2 class="sub-title">Calendar</h2>
        </div>
        <div class="month-nav">
          <button class="month-btn" onclick="prevMonth();renderCalendar()">â€¹</button>
          <span class="month-txt" id="calMonthTxt">Dec 2024</span>
          <button class="month-btn" onclick="nextMonth();renderCalendar()">â€º</button>
        </div>
        <div id="calendarGrid"></div>
      </section>

      <!-- NET WORTH TIMELINE -->
      <section id="netWorthView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('analytics')">â†</button>
          <h2 class="sub-title">EvoluÈ›ie Patrimoniu</h2>
          <button class="add-btn" onclick="saveNetWorthSnapshot()">+</button>
        </div>
        <div class="chart-box" style="height:240px">
          <canvas id="netWorthChart"></canvas>
        </div>
      </section>

      <!-- CHALLENGES -->
      <section id="challengesView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">ProvocÄƒri Economisire</h2>
          <button class="add-btn" onclick="openChallengeModal()">+</button>
        </div>
        <div id="challengesList"></div>
      </section>

      <!-- INSIGHTS -->
      <section id="insightsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('analytics')">â†</button>
          <h2 class="sub-title">AI Insights</h2>
        </div>
        <div id="advancedInsights"></div>
      </section>
      <!-- CUSTOM CATEGORIES -->
      <section id="customcatsView" class="view">
        <div class="sub-hdr">
          <button class="back-btn" onclick="nav('menu')">â†</button>
          <h2 class="sub-title">Categorii Custom</h2>
          <button class="add-btn" onclick="openCustomCatModal()">+</button>
        </div>
        <div id="customCatsList"></div>
      </section>
    </main>

    <!-- Bottom Nav - 5 butoane principale -->
    <nav class="bnav">
      <button class="nav-btn on" data-v="home" onclick="nav('home')">
        <span class="nav-icon">ğŸ </span>AcasÄƒ
      </button>
      <button class="nav-btn" data-v="transactions" onclick="nav('transactions')">
        <span class="nav-icon">ğŸ“‹</span>Istoric
      </button>
      <button class="nav-btn fab" onclick="openSmartAdd()">
        <div class="fab-btn">+</div>
      </button>
      <button class="nav-btn" data-v="budgets" onclick="nav('budgets')">
        <span class="nav-icon">ğŸ“Š</span>Bugete
      </button>
      <button class="nav-btn" data-v="menu" onclick="nav('menu')">
        <span class="nav-icon">â˜°</span>Cont
      </button>
    </nav>
  </div>

  <!-- MODALS -->
  
  <!-- Smart Add Modal - AI Categorization -->
  <div id="smartAddModal" class="modal">
    <div class="modal-bg" onclick="closeModal('smartAddModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head">
        <span class="modal-title">âœ¨ AdaugÄƒ Rapid</span>
        <button class="modal-x" onclick="closeModal('smartAddModal')">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="smart-hint">Scrie natural, de ex: "50 cafea" sau "salariu 5000"</div>
        <input type="text" id="smartInput" class="form-input big" placeholder="50 cafea..." oninput="processSmartInput()" autocomplete="off">
        <div id="smartPreview" class="hide" style="margin-top:16px"></div>
        <div class="smart-btns">
          <button class="submit-btn" onclick="saveSmartTx()">ğŸ’¾ SalveazÄƒ</button>
          <button class="submit-btn" style="background:var(--card2);color:var(--text);margin-top:8px" onclick="closeModal('smartAddModal');openTxModal()">ğŸ“ Formular Complet</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Custom Category Modal -->
  <div id="customCatModal" class="modal">
    <div class="modal-bg" onclick="closeModal('customCatModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ·ï¸ Categorie NouÄƒ</span><button class="modal-x" onclick="closeModal('customCatModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="customCatForm" onsubmit="saveCustomCat(event)">
          <div class="form-row">
            <label class="form-lbl">Tip</label>
            <select id="customCatType" class="form-select" required>
              <option value="expense">ğŸ’¸ CheltuialÄƒ</option>
              <option value="income">ğŸ’µ Venit</option>
            </select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Nume categorie</label>
            <input type="text" id="customCatName" class="form-input" required placeholder="Ex: Freelance Design">
          </div>
          <div class="form-row">
            <label class="form-lbl">Emoji/Icon</label>
            <input type="text" id="customCatIcon" class="form-input" placeholder="ğŸ¨" maxlength="2">
          </div>
          <div class="form-row">
            <label class="form-lbl">Culoare</label>
            <input type="color" id="customCatColor" class="form-input" value="#8b5cf6" style="height:44px;padding:4px">
          </div>
          <div class="form-row">
            <label class="form-lbl">Subcategorii (separate prin virgulÄƒ)</label>
            <input type="text" id="customCatSubs" class="form-input" placeholder="Logo, Banner, UI/UX, IlustraÈ›ii">
          </div>
          <div class="form-row">
            <label class="form-lbl">Keywords pentru AI (separate prin virgulÄƒ)</label>
            <input type="text" id="customCatKeywords" class="form-input" placeholder="design, grafica, logo, banner">
          </div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Transaction Modal -->
  <div id="txModal" class="modal">
    <div class="modal-bg" onclick="closeModal('txModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head">
        <span class="modal-title" id="txModalTitle">TranzacÈ›ie nouÄƒ</span>
        <button class="modal-x" onclick="closeModal('txModal')">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="type-tabs">
          <button class="type-tab exp on" data-t="expense" onclick="setTxType('expense')">ğŸ’¸ CheltuialÄƒ</button>
          <button class="type-tab inc" data-t="income" onclick="setTxType('income')">ğŸ’µ Venit</button>
        </div>
        <form id="txForm" onsubmit="saveTx(event)">
          <input type="hidden" id="txId">
          <input type="hidden" id="txType" value="expense">
          <div class="form-row">
            <input type="number" class="form-input big" id="txAmount" placeholder="0" step="0.01" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">Categorie</label>
            <select id="txCat" class="form-select" required onchange="loadSubcats()"></select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Subcategorie</label>
            <select id="txSubcat" class="form-select"></select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Data</label>
            <input type="date" id="txDate" class="form-input" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">Tags (opÈ›ional)</label>
            <input type="text" id="txTagsInput" class="form-input" placeholder="Ex: #vacanta, #business">
          </div>
          <div class="form-row">
            <label class="form-lbl">NotÄƒ (opÈ›ional)</label>
            <input type="text" id="txNote" class="form-input" placeholder="AdaugÄƒ o notÄƒ...">
          </div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
          <button type="button" class="submit-btn red" id="txDeleteBtn" style="display:none;margin-top:8px" onclick="deleteTx()">È˜terge</button>
        </form>
      </div>
    </div>
  </div>

  <!-- AI Modal -->
  <div id="aiModal" class="modal fullscreen">
    <div class="modal-bg" onclick="closeModal('aiModal')"></div>
    <div class="modal-sheet ai-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head">
        <span class="modal-title">ğŸ§  Finley - Consilierul TÄƒu</span>
        <button class="modal-x" onclick="closeModal('aiModal')">âœ•</button>
      </div>
      <div class="modal-body ai-body">
        <div class="ai-chat" id="aiChat">
          <div class="ai-msg">
            <div class="ai-pic">ğŸ§ </div>
            <div class="ai-bubble">
              Salut! Sunt <strong>Finley</strong>, consilierul tÄƒu financiar personal. ğŸ‘‹<br><br>
              Pot sÄƒ te ajut cu orice Ã®ntrebare despre finanÈ›e - sau sÄƒ stÄƒm de vorbÄƒ despre orice! ÃntreabÄƒ-mÄƒ ce vrei. ğŸ’¬
            </div>
          </div>
        </div>
        <div class="ai-quick-grid">
          <button class="ai-qbtn full" onclick="askAI('AnalizeazÄƒ-mi situaÈ›ia financiarÄƒ È™i spune-mi cum stau')">
            <span class="qbtn-icon">ğŸ“Š</span>
            <span class="qbtn-text">AnalizÄƒ completÄƒ</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('Ce sfaturi ai pentru mine sÄƒ economisesc mai mult?')">
            <span class="qbtn-icon">ğŸ’¡</span>
            <span class="qbtn-text">Sfaturi</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('CÃ¢nd aÈ™ putea atinge independenÈ›a financiarÄƒ?')">
            <span class="qbtn-icon">ğŸ”¥</span>
            <span class="qbtn-text">FIRE</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('Cum ar trebui sÄƒ Ã®ncep sÄƒ investesc banii?')">
            <span class="qbtn-icon">ğŸ“ˆ</span>
            <span class="qbtn-text">InvestiÈ›ii</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('AjutÄƒ-mÄƒ sÄƒ-mi fac un buget mai bun')">
            <span class="qbtn-icon">ğŸ’°</span>
            <span class="qbtn-text">Buget</span>
          </button>
          <button class="ai-qbtn" onclick="askAI('Ce predicÈ›ii ai pentru cheltuielile mele luna asta?')">
            <span class="qbtn-icon">ğŸ”®</span>
            <span class="qbtn-text">PredicÈ›ii</span>
          </button>
        </div>
        <div class="ai-row">
          <input type="text" class="ai-input" id="aiInput" placeholder="Scrie orice Ã®ntrebare..." onkeypress="if(event.key==='Enter')sendAI()">
          <button class="ai-send" onclick="sendAI()">â¤</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Goal Modal -->
  <div id="goalModal" class="modal">
    <div class="modal-bg" onclick="closeModal('goalModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ¯ Obiectiv</span><button class="modal-x" onclick="closeModal('goalModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="goalForm" onsubmit="saveGoal(event)">
          <input type="hidden" id="goalId">
          <div class="form-row"><label class="form-lbl">Nume</label><input type="text" id="goalName" class="form-input" required placeholder="Ex: VacanÈ›Äƒ"></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ È›intÄƒ</label><input type="number" id="goalTarget" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">Economisit</label><input type="number" id="goalSaved" class="form-input" value="0"></div>
          <div class="form-row"><label class="form-lbl">Deadline</label><input type="date" id="goalDeadline" class="form-input"></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Budget Modal -->
  <div id="budgetModal" class="modal">
    <div class="modal-bg" onclick="closeModal('budgetModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ“Š Buget</span><button class="modal-x" onclick="closeModal('budgetModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="budgetForm" onsubmit="saveBudget(event)">
          <input type="hidden" id="budgetId">
          <div class="form-row"><label class="form-lbl">Categorie</label><select id="budgetCat" class="form-select" required></select></div>
          <div class="form-row"><label class="form-lbl">LimitÄƒ lunarÄƒ</label><input type="number" id="budgetLimit" class="form-input" required></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Account Modal -->
  <div id="accountModal" class="modal">
    <div class="modal-bg" onclick="closeModal('accountModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ¦ Cont</span><button class="modal-x" onclick="closeModal('accountModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="accountForm" onsubmit="saveAccount(event)">
          <input type="hidden" id="accountId">
          <div class="form-row"><label class="form-lbl">Nume</label><input type="text" id="accountName" class="form-input" required placeholder="Ex: ING"></div>
          <div class="form-row"><label class="form-lbl">Tip</label><select id="accountType" class="form-select"><option value="bank">ğŸ¦ BancÄƒ</option><option value="cash">ğŸ’µ Cash</option><option value="savings">ğŸ· Economii</option></select></div>
          <div class="form-row"><label class="form-lbl">Sold</label><input type="number" id="accountBal" class="form-input" required></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Debt Modal -->
  <div id="debtModal" class="modal">
    <div class="modal-bg" onclick="closeModal('debtModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ¤ Datorie</span><button class="modal-x" onclick="closeModal('debtModal')">âœ•</button></div>
      <div class="modal-body">
        <div class="type-tabs">
          <button class="type-tab exp on" data-t="owe" onclick="setDebtType('owe')">ğŸ“¤ Datorez</button>
          <button class="type-tab inc" data-t="owed" onclick="setDebtType('owed')">ğŸ“¥ Ãmi datoreazÄƒ</button>
        </div>
        <form id="debtForm" onsubmit="saveDebt(event)">
          <input type="hidden" id="debtId"><input type="hidden" id="debtType" value="owe">
          <div class="form-row"><label class="form-lbl">PersoanÄƒ</label><input type="text" id="debtPerson" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ</label><input type="number" id="debtAmount" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">Motiv</label><input type="text" id="debtNote" class="form-input"></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Reminder Modal -->
  <div id="reminderModal" class="modal">
    <div class="modal-bg" onclick="closeModal('reminderModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">â° Reminder</span><button class="modal-x" onclick="closeModal('reminderModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="reminderForm" onsubmit="saveReminder(event)">
          <input type="hidden" id="reminderId">
          <div class="form-row"><label class="form-lbl">Nume</label><input type="text" id="reminderName" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ</label><input type="number" id="reminderAmount" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">Ziua lunii</label><input type="number" id="reminderDay" class="form-input" min="1" max="31" value="1"></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Utility Modal -->
  <div id="utilityModal" class="modal">
    <div class="modal-bg" onclick="closeModal('utilityModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ’¡ FacturÄƒ</span><button class="modal-x" onclick="closeModal('utilityModal')">âœ•</button></div>
      <div class="modal-body">
        <form id="utilityForm" onsubmit="saveUtility(event)">
          <input type="hidden" id="utilityId">
          <div class="form-row"><label class="form-lbl">Tip</label><select id="utilityType" class="form-select" required><option value="">SelecteazÄƒ</option><option value="electricity">âš¡ Curent</option><option value="gas">ğŸ”¥ Gaz</option><option value="water">ğŸ’§ ApÄƒ</option><option value="internet">ğŸ“¶ Internet</option></select></div>
          <div class="form-row"><label class="form-lbl">Luna</label><input type="month" id="utilityMonth" class="form-input" required></div>
          <div class="form-row"><label class="form-lbl">SumÄƒ</label><input type="number" id="utilityAmount" class="form-input" required></div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Recurring Transaction Modal -->
  <div id="recurringModal" class="modal">
    <div class="modal-bg" onclick="closeModal('recurringModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ”„ TranzacÈ›ie RecurentÄƒ</span><button class="modal-x" onclick="closeModal('recurringModal')">âœ•</button></div>
      <div class="modal-body">
        <div class="type-tabs">
          <button class="type-tab exp on" data-t="expense" onclick="setRecurType('expense')">ğŸ’¸ CheltuialÄƒ</button>
          <button class="type-tab inc" data-t="income" onclick="setRecurType('income')">ğŸ’µ Venit</button>
        </div>
        <form id="recurringForm" onsubmit="saveRecurring(event)">
          <input type="hidden" id="recurType" value="expense">
          <div class="form-row">
            <label class="form-lbl">SumÄƒ</label>
            <input type="number" class="form-input" id="recurAmount" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">Categorie</label>
            <select id="recurCat" class="form-select" required onchange="loadSubcats()"></select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Subcategorie</label>
            <select id="recurSubcat" class="form-select"></select>
          </div>
          <div class="form-row">
            <label class="form-lbl">FrecvenÈ›Äƒ</label>
            <select id="recurFreq" class="form-select" required>
              <option value="daily">Zilnic</option>
              <option value="weekly">SÄƒptÄƒmÃ¢nal</option>
              <option value="monthly">Lunar</option>
              <option value="yearly">Anual</option>
            </select>
          </div>
          <div class="form-row">
            <label class="form-lbl">Data Ã®nceput</label>
            <input type="date" id="recurStart" class="form-input" required>
          </div>
          <div class="form-row">
            <label class="form-lbl">NotÄƒ</label>
            <input type="text" id="recurNote" class="form-input" placeholder="Ex: Chirie">
          </div>
          <button type="submit" class="submit-btn">SalveazÄƒ</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Challenge Modal -->
  <div id="challengeModal" class="modal">
    <div class="modal-bg" onclick="closeModal('challengeModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title">ğŸ¯ Alege Provocare</span><button class="modal-x" onclick="closeModal('challengeModal')">âœ•</button></div>
      <div class="modal-body">
        <div id="challengeTemplates"></div>
      </div>
    </div>
  </div>

  <!-- Day Transactions Modal -->
  <div id="dayTxModal" class="modal">
    <div class="modal-bg" onclick="closeModal('dayTxModal')"></div>
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-head"><span class="modal-title" id="dayTxDate">TranzacÈ›ii</span><button class="modal-x" onclick="closeModal('dayTxModal')">âœ•</button></div>
      <div class="modal-body">
        <div id="dayTxList"></div>
      </div>
    </div>
  </div>

  <div class="toasts" id="toasts"></div>

  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
</body>
</html>
